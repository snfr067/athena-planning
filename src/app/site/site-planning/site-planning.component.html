<div class="tool">
  <span class="svg" matTooltip="{{ 'obstacleInfo' | translate }}" (click)="addMoveable('rect')">
    <svg id="svg_01" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
      <g>
        <rect x="-1" y="-1" width="32" height="32" id="canvas_background" fill="#fff" />
        <g id="canvasGrid" display="none">
          <rect width="100%" height="100%" x="0" y="0" stroke-width="0" fill="url(#gridpattern)" />
        </g>
      </g>
      <g>
        <rect fill="#000000" stroke-width="1.5" x="111" y="151" width="41" height="28" stroke="#000" />
        <rect class="target" fill="#ffffff" stroke-width="1.5" x="0" y="0" width="30" height="30" id="svg_1" />
      </g>
    </svg>
  </span>
  <span class="svg" matTooltip="{{ 'obstacleInfo' | translate }}" (click)="addMoveable('ellipse')">
    <svg id="svg_02" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
      <g>
        <rect fill="none" id="canvas_background" height="32" width="20" y="-1" x="-1" />
        <g display="none" id="canvasGrid">
          <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%" />
        </g>
      </g>
      <g>
        <rect stroke="#000" height="28" width="41" y="151" x="111" stroke-width="1.5" fill="#000000" />
        <ellipse class="target" ry="15" rx="15" id="svg_2" cy="15" cx="15" stroke-width="1.5" fill="#ffffff" />
      </g>
    </svg>
  </span>

  <span class="svg" matTooltip="{{ 'obstacleInfo' | translate }}" (click)="addMoveable('polygon')">
    <svg id="svg_03" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
      <g>
        <rect x="-1" y="-1" width="32" height="32" id="canvas_background" fill="none" />
        <g id="canvasGrid" display="none">
          <rect width="100%" height="100%" x="0" y="0" stroke-width="0" fill="url(#gridpattern)" />
        </g>
      </g>
      <g>
        <rect fill="#000000" stroke-width="1.5" x="111" y="151" width="41" height="28" stroke="#000" />
        <polygon class="target" points="15,0 30,30 0,30" fill="#ffffff" id="svg_3" />
        <!-- <path class="target" fill="#ffffff" stroke-width="1.5" d="m1.75,28.69313l13.5,-25.625l13.5,25.625l-27,0z" id="svg_3"/> -->
      </g>
    </svg>
  </span>

  <span class="svg" matTooltip="{{ 'obstacleInfo' | translate }}" (click)="addMoveable('trapezoid')" style="cursor:point; display:block;  text-align: center;  margin: .7em 0 1.2em;">
    <svg id="svg_07" width="25" height="20px" xmlns="http://www.w3.org/2000/svg">
      <g>
        <rect x="-1" y="-1" height="20" width="25" fill="none" id="canvas_background"></rect>
        <g id="canvasGrid" display="none">
          <rect width="100%" height="100%" x="0" y="0" stroke-width="0" fill="url(#gridpattern)"></rect>
        </g>
      </g>
      <g>
        <rect fill="none" stroke-width="1.5" x="50" y="0" width="25" height="20" stroke="none"></rect>
        <path class="target" fill="#ffffff" stroke="null" id="svg_7" d="M5.4,0L0,16h22.9L17.3,0C17.3,0,5.3,0,5.4,0z"></path>
      </g>
    </svg>
  </span>

  <hr>
  <span class="svg" matTooltip="{{ 'defaultBs' | translate }}" (click)="addMoveable('defaultBS')">
    <svg id="svg_04" class="s" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
      <g>
        <rect fill="none" id="canvas_background" height="32" width="32" y="-1" x="-1" />
      </g>
      <g>
        <path fill="none" d="m0,0l24,0l0,24l-24,0l0,-24z" />
        <path class="target" fill="#ffffff" stroke="null" id="svg_4" d="m27.1373,5.80872l1.19321,-1.19321c-2.08811,-2.08811 -4.77283,-3.13217 -7.45754,-3.13217s-5.36943,1.04406 -7.45754,3.13217l1.19321,1.19321c1.78981,-1.64066 4.02707,-2.53556 6.26434,-2.53556s4.47453,0.89491 6.26434,2.53556zm-1.34236,1.19321c-1.34236,-1.34236 -3.13217,-2.08811 -4.92198,-2.08811s-3.57962,0.74575 -4.92198,2.08811l1.19321,1.19321c1.04406,-1.04406 2.38641,-1.49151 3.72877,-1.49151c1.34236,0 2.68472,0.44745 3.72877,1.49151l1.19321,-1.19321zm-0.44745,9.39651l-2.98302,0l0,-5.96604l-2.98302,0l0,5.96604l-14.91509,0c-1.64066,0 -2.98302,1.34236 -2.98302,2.98302l0,5.96604c0,1.64066 1.34236,2.98302 2.98302,2.98302l20.88112,0c1.64066,0 2.98302,-1.34236 2.98302,-2.98302l0,-5.96604c0,-1.64066 -1.34236,-2.98302 -2.98302,-2.98302zm-16.4066,7.45754l-2.98302,0l0,-2.98302l2.98302,0l0,2.98302zm5.22028,0l-2.98302,0l0,-2.98302l2.98302,0l0,2.98302zm5.22028,0l-2.98302,0l0,-2.98302l2.98302,0l0,2.98302z" />
      </g>
    </svg>

  </span>

  <span *ngIf="planningIndex !== '3'" class="svg" matTooltip="{{ 'candidateBs' | translate }}" (click)="addMoveable('candidate')">
    <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
         width="28" height="22" viewBox="0 0 260.000000 261.000000">
      <g transform="translate(0.000000,261.000000) scale(0.100000,-0.100000)"
         fill="#ffffff" stroke="none">
        <path d="M1175 2595 c-352 -60 -609 -289 -707 -632 -32 -112 -32 -322 0 -443
          30 -112 37 -126 402 -760 172 -300 338 -589 368 -642 31 -54 58 -98 62 -98 3
          0 94 156 205 348 109 191 284 496 389 677 193 334 225 403 252 543 40 209 -13
          462 -134 638 -140 204 -323 318 -591 368 -97 19 -138 19 -246 1z m267 -558
          c48 -24 124 -100 150 -150 18 -34 22 -57 22 -141 0 -118 -18 -168 -84 -235
          -66 -66 -138 -95 -235 -95 -72 0 -86 4 -143 34 -83 45 -135 104 -156 179 -18
          66 -21 160 -5 212 22 76 116 179 192 207 50 19 214 12 260 -10z" />
      </g>
    </svg>
    <!--<svg id="svg_05" class="s" width="28" height="22" xmlns="http://www.w3.org/2000/svg">
    <g>
      <rect fill="none" id="canvas_background" height="20" width="30" y="-1" x="-1" />
      <g display="none" overflow="visible" y="0" x="0" height="100%" width="100%" id="canvasGrid">
        <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%" />
      </g>
    </g>
    <g>
      <rect stroke="#000" rx="3" id="svg_3" height="17.79447" width="27.84664" y="0.08384" x="0.08216" stroke-opacity="null" stroke-width="0" fill="#ffffff" />
      <text stroke="#000" transform="matrix(0.8532502651214598,0,0,0.8532502651214598,0.7290017828345299,0.38280437514185905) " font-style="normal" font-weight="bold" xml:space="preserve" text-anchor="start" font-family="sans-serif" font-size="12" id="svg_7" y="14.00717" x="3.15093" stroke-opacity="null" stroke-width="0" fill="#000000">New</text>
    </g>
  </svg>-->
    </span>
    <hr>
    <span class="svg" matTooltip="{{ 'new.ue' | translate }}" (click)="addMoveable('UE')">
      <!--<svg id="svg_06" class="s" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
      <g>
        <rect fill="none" height="32" width="32" y="-1" x="-1"/>
       </g>
       <g>
        <path class="target" fill="#ffffff" id="svg_6" d="m26.45453,3l-22.90908,0c-1.4,0 -2.54545,1.14545 -2.54545,2.54545l0,15.27272c0,1.4 1.14545,2.54545 2.54545,2.54545l8.90909,0l0,2.54545l-2.54545,0l0,2.54545l10.18181,0l0,-2.54545l-2.54545,0l0,-2.54545l8.90909,0c1.4,0 2.54545,-1.14545 2.54545,-2.54545l0,-15.27272c0,-1.4 -1.14545,-2.54545 -2.54545,-2.54545zm0,17.81817l-22.90908,0l0,-15.27272l22.90908,0l0,15.27272z"/>
       </g>
     </svg>-->
      <svg id="svg_06" class="s" width="20" height="30" xmlns="http://www.w3.org/2000/svg">
        <!--<g>
        <rect fill="none" height="20" width="30" y="-1" x="-1"/>
      </g>-->
        <g>
          <path class="target" fill="#ffffff" id="svg_6" d="M15.88,0H3.12C1.4,0,0,1.47,0,3.27v22.46C0,27.53,1.4,29,3.12,29h12.76C17.6,29,19,27.53,19,25.73V3.27
        C19,1.47,17.6,0,15.88,0z M9.5,27.09c-0.48,0-0.86-0.41-0.86-0.91c0-0.5,0.39-0.91,0.86-0.91c0.48,0,0.86,0.41,0.86,0.91
        C10.36,26.69,9.98,27.09,9.5,27.09z M16.71,21.99c0,0.77-0.59,1.39-1.32,1.39H3.61c-0.73,0-1.32-0.62-1.32-1.39V4.11
        c0-0.77,0.59-1.39,1.32-1.39h11.77c0.73,0,1.32,0.62,1.32,1.39V21.99z" />
        </g>
      </svg>
    </span>
    <hr>
    <span class="svg" matTooltip="{{ 'subfield' | translate }}" (click)="addMoveable('subField')">
      <svg id="svg_07" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
        <g>
          <rect fill="#0d213a" stroke-width="2" x="5" y="5" width="20" height="20" stroke="#fff" />
          <rect fill="#0d213a" stroke-width="2" x="0" y="0" width="20" height="20" stroke="#fff" />
        </g>
      </svg>
    </span>
    <!-- <div>
    <label>
      <input type="checkbox" name="" id="" class="checkbox">
      <span class="btn-box">
        <span class="btn"></span>
      </span>
    </label>
  </div> -->
</div>

<mat-sidenav-container class="example-container">
  <mat-sidenav-content>


    <div id="d_area">
      <div id="top_area">
        <button class="toggle" mat-button (click)="sidenav.toggle()">
          <span class="material-icons">swap_horiz</span>
        </button>
        <h2 class="inline-block">
          {{ getTitle() }}(
          <mat-form-field floatLabel="never" style="height: 45px;">
            <input matInput [(ngModel)]="calculateForm.taskName" placeholder="{{ 'taskName' | translate }}" required>
          </mat-form-field>
          )
        </h2>
        <mat-button-toggle-group class="inline-block">
          <mat-button-toggle value="import" (click)="file.click()">{{ 'import' | translate }}</mat-button-toggle>
          <mat-button-toggle value="export" (click)="export()">{{ 'tasklist.export' | translate }}</mat-button-toggle>
        </mat-button-toggle-group>
        <input type="file" #file style="display: none;" (change)="import($event)" multiple="false" />

        <mat-button-toggle-group class="inline-block ml_5">
          <mat-button-toggle value="go" (click)="calculate()">{{ 'planning.calculate' | translate }}</mat-button-toggle>
          <mat-button-toggle *ngIf="taskid !== ''" value="result" (click)="result()">{{ 'planning.result' | translate }}</mat-button-toggle>
          <!-- <mat-button-toggle (click)="view3D()">{{ 'view.3d' | translate }}</mat-button-toggle> -->
        </mat-button-toggle-group>

        <span style="margin-left: 5px; position: relative; bottom: 10px; line-height: 2.2">
          <mat-checkbox [(ngModel)]="isShowSubField">
            {{ 'isShowSubField' | translate }}
          </mat-checkbox>
        </span>

      </div>
      <!-- <div class="dropDown_area" style="background-image:url({{imageSrc}})">

      </div> -->
      <div #chart id="chart" style="position: relative; overflow-x: auto">
        <img id="north" src="assets/img/north.jpg" align="right" [ngStyle]="{'transform': 'rotate(' + calculateForm.geographicalNorth+ 'deg)'}">
        <div #dragArea [ngStyle]="dragStyle">
          <span *ngIf="isShowSubField">
            <span *ngFor="let item of subFieldList; let i=index" id="{{item}}" [ngStyle]="spanStyle[item]" (mouseover)="hover($event, item, i)" (mouseout)="hoverout($event)" class="obstacle" (click)="moveClick(item);" (contextmenu)="onRightClick($event, item, i)">
              <ng-container *ngIf="svgStyle[item]">
                <svg *ngIf="dragObject[item].element === 'subField' || dragObject[item].element == '4'" [attr.width]="svgStyle[item].width" [attr.height]="svgStyle[item].height" style="display: inherit;" xmlns="http://www.w3.org/2000/svg">
                  <!-- <g> -->
                  <!-- <rect x="-1" y="-1" width="32" height="32" id="canvas_background" fill="#fff"/> -->
                  <g id="canvasGrid" display="none">
                    <rect width="100%" height="100%" x="0" y="0" stroke-width="0" fill="url(#gridpattern)" />
                  </g>
                  <!-- </g> -->
                  <g>
                    <!-- <rect fill="#ffffff" stroke-width="1.5" x="111" y="151" width="41" height="28" stroke="#fff"/> -->
                    <rect class="drag_rect" [ngStyle]="subFieldStyle[item]" stroke-width="1.5" x="0" y="0" />
                  </g>
                </svg>
              </ng-container>
            </span>
            <!-- <span *ngFor="let item of subFieldList; let i=index" id="{{item}}" [ngStyle]="spanStyle[item]" (mouseover)="hover($event, item)" (mouseout)="hoverout($event)" class="obstacle" (click)="moveClick(item);" (contextmenu)="onRightClick($event, item, i)" >
            </span> -->
          </span>
          <span *ngIf="live" class="msg_label" [ngStyle]="tooltipStyle" [innerHTML]="tooltipStr"></span>
          <span *ngFor="let item of obstacleList; let i=index" id="{{item}}" [ngStyle]="spanStyle[item]" (mouseover)="hover($event, item, i)" (mouseout)="hoverout($event)" class="obstacle" (click)="moveClick(item)" (contextmenu)="onRightClick($event, item, i)">
            <ng-container *ngIf="svgStyle[item]">
              <svg *ngIf="dragObject[item].element === 'rect' || dragObject[item].element == '0'" [attr.width]="svgStyle[item].width" [attr.height]="svgStyle[item].height" style="display: inherit;" xmlns="http://www.w3.org/2000/svg">
                <g>
                  <rect x="-1" y="-1" width="32" height="32" id="canvas_background" fill="#fff" />
                  <g id="canvasGrid" display="none">
                    <rect width="100%" height="100%" x="0" y="0" stroke-width="0" fill="url(#gridpattern)" />
                  </g>
                </g>
                <g>
                  <rect fill="#000000" stroke-width="1.5" x="111" y="151" width="41" height="28" stroke="#000" />
                  <rect class="drag_rect" [ngStyle]="rectStyle[item]" stroke-width="1.5" x="0" y="0" />
                </g>
              </svg>

              <svg *ngIf="dragObject[item].element === 'ellipse' || dragObject[item].element == '2'" [ngStyle]="svgStyle[item]" xmlns="http://www.w3.org/2000/svg">
                <g>
                  <rect fill="none" id="canvas_background" height="32" width="20" y="-1" x="-1" />
                  <g display="none" id="canvasGrid">
                    <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%" />
                  </g>
                </g>
                <g>
                  <rect stroke="#fff" height="28" width="41" y="151" x="111" stroke-width="1.5" fill="#fff" />
                  <ellipse class="drag_rect" [ngStyle]="ellipseStyle[item]" stroke-width="1.5" fill="#ffffff" />
                </g>
              </svg>

              <svg *ngIf="dragObject[item].element === 'polygon' || dragObject[item].element == '1'" [ngStyle]="svgStyle[item]" xmlns="http://www.w3.org/2000/svg">
                <g>
                  <rect x="-1" y="-1" width="32" height="32" fill="none" />
                  <g id="canvasGrid" display="none">
                    <rect width="100%" height="100%" x="0" y="0" stroke-width="0" fill="none" />
                  </g>
                </g>
                <g>
                  <rect fill="rgba(0,0,0,0)" stroke-width="1.5" x="111" y="151" width="41" height="28" />
                  <polygon class="drag_rect" [ngStyle]="polygonStyle[item]" [attr.points]="polygonStyle[item].points" />
                </g>
              </svg>

              <svg *ngIf="dragObject[item].element === 'trapezoid' || dragObject[item].element == '3'" [ngStyle]="svgStyle[item]" viewBox="0 0 30 30" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
                <g>
                  <rect x="-1" y="-1" height="20" width="25" fill="none" id="canvas_background2"></rect>
                  <g id="canvasGrid" display="none">
                    <rect width="100%" height="100%" x="0" y="0" stroke-width="0" fill="url(#gridpattern)"></rect>
                  </g>
                </g>
                <g>
                  <rect fill="none" stroke-width="1.5" x="50" y="0" width="25" height="20" stroke="none"></rect>
                  <path class="drag_rect" [ngStyle]="trapezoidStyle[item]" stroke="null" id="svg_7" d="M8,0L0,30h30L22,0C22,0,5.3,0,8,0z"></path>
                </g>
              </svg>
            </ng-container>
          </span>

          <span *ngFor="let item of defaultBSList; let i=index" id="{{item}}" [ngStyle]="spanStyle[item]" (mouseover)="hover($event, item, i)" (mouseout)="hoverout($event)" class="defaultBS" (click)="moveClick(item);" (contextmenu)="onRightClick($event, item, i)">
            <svg [ngStyle]="svgStyle[item]" class="s" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect fill="none" id="canvas_background" height="32" width="32" y="-1" x="-1" />
              </g>
              <g>
                <path fill="none" d="m0,0l24,0l0,24l-24,0l0,-24z" />
                <path class="drag_rect" [ngStyle]="pathStyle[item]" stroke="null" d="m27.1373,5.80872l1.19321,-1.19321c-2.08811,-2.08811 -4.77283,-3.13217 -7.45754,-3.13217s-5.36943,1.04406 -7.45754,3.13217l1.19321,1.19321c1.78981,-1.64066 4.02707,-2.53556 6.26434,-2.53556s4.47453,0.89491 6.26434,2.53556zm-1.34236,1.19321c-1.34236,-1.34236 -3.13217,-2.08811 -4.92198,-2.08811s-3.57962,0.74575 -4.92198,2.08811l1.19321,1.19321c1.04406,-1.04406 2.38641,-1.49151 3.72877,-1.49151c1.34236,0 2.68472,0.44745 3.72877,1.49151l1.19321,-1.19321zm-0.44745,9.39651l-2.98302,0l0,-5.96604l-2.98302,0l0,5.96604l-14.91509,0c-1.64066,0 -2.98302,1.34236 -2.98302,2.98302l0,5.96604c0,1.64066 1.34236,2.98302 2.98302,2.98302l20.88112,0c1.64066,0 2.98302,-1.34236 2.98302,-2.98302l0,-5.96604c0,-1.64066 -1.34236,-2.98302 -2.98302,-2.98302zm-16.4066,7.45754l-2.98302,0l0,-2.98302l2.98302,0l0,2.98302zm5.22028,0l-2.98302,0l0,-2.98302l2.98302,0l0,2.98302zm5.22028,0l-2.98302,0l0,-2.98302l2.98302,0l0,2.98302z" />
              </g>
            </svg>
          </span>
          <span *ngFor="let item of defaultBSList; let i=index" id="{{item}}_circle" [ngStyle]="circleStyle[item]" class="rounded-circle blue_circle">{{ (i + 1) }}</span>
          <span *ngFor="let item of candidateList; let i=index" id="{{item}}" style="width: 32px; height:32px"
                [ngStyle]="spanStyle[item]"
                (mouseover)="hover($event, item, i)"
                (mouseout)="hoverout($event)" class="candidate position_icon" 
                (click)="moveClick(item);" (contextmenu)="onRightClick($event, item, i)">
            <!--<svg [ngStyle]="svgStyle[item]" class="s" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect fill="none" id="canvas_background" height="3" width="25" y="-1" x="-1" />
              </g>
              <g>
                <g>
                  <rect x="0" width="24" height="15" fill="none" />
                </g>
                <g>
                  <g stroke="null">
                    <g stroke="null">
                      <rect stroke="#000" rx="3" id="svg_3" height="17.79447" width="27.84664" y="0.08384" x="0.08216" stroke-opacity="null" stroke-width="0" fill="#000" />
                      <text stroke="#fff" transform="matrix(0.8532502651214598,0,0,0.8532502651214598,0.7290017828345299,0.38280437514185905) " font-style="normal" font-weight="bold" xml:space="preserve" text-anchor="start" font-family="sans-serif" font-size="12" id="svg_7" y="14.00717" x="3.15093" stroke-opacity="null" stroke-width="0" fill="#fff">New</text>
                    </g>
                  </g>
                </g>
              </g>
            </svg>-->
            <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                 width="32" height="32" viewBox="0 0 260.000000 261.000000">
              <g>
                <rect fill="none" id="canvas_background" height="48" width="48" y="-1" x="-1" />
              </g>
              <g transform="translate(0.000000,261.000000) scale(0.100000,-0.100000)"
                 fill="#E84C3D" stroke="none">
                <path class="drag_rect" d="M1175 2595 c-352 -60 -609 -289 -707 -632 -32 -112 -32 -322 0 -443
                  30 -112 37 -126 402 -760 172 -300 338 -589 368 -642 31 -54 58 -98 62 -98 3
                  0 94 156 205 348 109 191 284 496 389 677 193 334 225 403 252 543 40 209 -13
                  462 -134 638 -140 204 -323 318 -591 368 -97 19 -138 19 -246 1z m267 -558
                  c48 -24 124 -100 150 -150 18 -34 22 -57 22 -141 0 -118 -18 -168 -84 -235
                  -66 -66 -138 -95 -235 -95 -72 0 -86 4 -143 34 -83 45 -135 104 -156 179 -18
                  66 -21 160 -5 212 22 76 116 179 192 207 50 19 214 12 260 -10z" />
              </g>
            </svg>
          </span>
          <span *ngFor="let item of candidateList; let i=index" id="{{item}}_circle" [ngStyle]="circleStyle[item]" class="rounded-circle pink_circle">{{ (i + 1) }}</span>
          <span *ngFor="let item of ueList; let i=index" id="{{item}}" [ngStyle]="spanStyle[item]" (mouseover)="hover($event, item, i)" (mouseout)="hoverout($event)" class="UE" (click)="moveClick(item);" (contextmenu)="onRightClick($event, item, i)">
            <svg class="s_ue" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect fill="none" height="10" width="29" y="-1" x="-1" />
              </g>
              <g>
                <path class="drag_rect" [ngStyle]="pathStyle[item]" d="M15.88,0H3.12C1.4,0,0,1.47,0,3.27v22.46C0,27.53,1.4,29,3.12,29h12.76C17.6,29,19,27.53,19,25.73V3.27
              C19,1.47,17.6,0,15.88,0z M9.5,27.09c-0.48,0-0.86-0.41-0.86-0.91c0-0.5,0.39-0.91,0.86-0.91c0.48,0,0.86,0.41,0.86,0.91
              C10.36,26.69,9.98,27.09,9.5,27.09z M16.71,21.99c0,0.77-0.59,1.39-1.32,1.39H3.61c-0.73,0-1.32-0.62-1.32-1.39V4.11
              c0-0.77,0.59-1.39,1.32-1.39h11.77c0.73,0,1.32,0.62,1.32,1.39V21.99z" />
              </g>
            </svg>
          </span>

        </div>
      </div>
    </div>

    <ngx-moveable #moveable
                  [target]="target"
                  [draggable]="true"
                  [origin]="true"
                  [rotatable]="true"
                  [pinchable]="true"
                  [scalable]="false"
                  [resizable]="resizable"
                  [warpable]="false"
                  [keepRatio]="false"
                  [snappable]="true"
                  [bounds]="bounds"
                  [snapCenter]="false"
                  [throttleDrag]="1"
                  [throttleScale]="0.01"
                  [throttleRotate]="0.2"
                  [throttleResize]="1"
                  (drag)="onDrag($event)"
                  (resize)="onResize($event)"
                  (rotate)="onRotate($event)"
                  (dragStart)="dragStart($event)"
                  (dragEnd)="onEnd()"
                  (resizeEnd)="resizeEnd();onEnd();"
                  (rotateEnd)="onEnd()"></ngx-moveable>

    <!-- an hidden div is created to set the position of appearance of the menu-->
    <div style="visibility: hidden; position: fixed;"
         [ngStyle]="menuTopLeftStyle"
         [matMenuTriggerFor]="rightMenu"></div>

    <!-- standard material menu -->
    <mat-menu #rightMenu="matMenu" id="rightMenu">
      <ng-template matMenuContent>
        <button class="rightClickBtnGroup">No. {{ this.svgNum }}</button>
        <button class="rightClickBtnGroup" (click)="openDeleteSetting()">{{ 'delete' | translate }}</button>
        <button class="rightClickBtnGroup"
                *ngIf="dragObject[svgId].type === 'obstacle';"
                (click)="$event.stopPropagation()"
                [(colorPicker)]="color"
                (colorPickerChange)="colorChange()">
          {{ 'planning.changeColor' | translate }}
        </button>
        <button class="rightClickBtnGroup" (click)="openHeightSetting()" *ngIf="dragObject[svgId].type !== 'subField'">
          <ng-container *ngIf="dragObject[svgId].type === 'obstacle' ; else otherTypeTemp2">
            {{ 'altitude.setting' | translate }}/{{ 'material.setting' | translate }}
          </ng-container>
          <ng-template #otherTypeTemp2>{{ 'altitude.setting' | translate }}</ng-template>
        </button>
        <button *ngIf="dragObject[svgId].type === 'defaultBS'" class="rightClickBtnGroup" (click)="openRfParamSetting(svgId, svgNum, false)">{{ 'rfparam.setting' | translate }}</button>
        <button *ngIf="dragObject[svgId].type === 'UE'" class="rightClickBtnGroup" (click)="openUEParamSetting(svgId, svgNum, false)">{{ 'ueParamLink' | translate }}</button>
        <!-- <button *ngIf="dragObject[svgId].type === 'defaultBS' || dragObject[svgId].type === 'candidate'" class="rightClickBtnGroup" (click)="openRfParamSetting(svgId)">{{ 'rfparam.setting' | translate }}</button> -->
      </ng-template>
    </mat-menu>
    <mat-menu #mater="matMenu">
      <ng-template matMenuContent>
        <button mat-menu-item (click)="materialChange('1')" [class]="(dragObject[svgId].material === '1' ? 'text-white bg-primary' : '')">木頭</button>
        <button mat-menu-item (click)="materialChange('2')" [class]="(dragObject[svgId].material === '2' ? 'text-white bg-primary' : '')">水泥</button>
        <button mat-menu-item (click)="materialChange('3')" [class]="(dragObject[svgId].material === '3' ? 'text-white bg-primary' : '')">輕鋼架</button>
        <button mat-menu-item (click)="materialChange('4')" [class]="(dragObject[svgId].material === '4' ? 'text-white bg-primary' : '')">玻璃</button>
      </ng-template>
    </mat-menu>




  </mat-sidenav-content>
  <mat-sidenav #sidenav mode="side" position="end" [(opened)]="opened">
    <mat-accordion>
      <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>{{ 'planning.target' | translate }}</mat-panel-title>
        </mat-expansion-panel-header>
        <div class="panel_content">
          <!-- Add simulation button -->
          <mat-radio-group [(ngModel)]="planningIndex" (change)="changePlanningIndex()">
            <mat-radio-button class="block" value="3" matTooltip="{{ 'simulation' | translate }}">
              {{ 'simulation' | translate }}
            </mat-radio-button>
          </mat-radio-group>

          <!-- --- -->
          <mat-radio-group [(ngModel)]="planningIndex" (change)="changePlanningIndex()">
            <mat-radio-button class="block" value="1" matTooltip="{{ 'planning.layered.tooltip' | translate }}">
              {{ 'planning.layered' | translate }}
            </mat-radio-button>
          </mat-radio-group>

          <div *ngIf="planningIndex == '1'" class="subTarget">
            <!-- <mat-checkbox [(ngModel)]="calculateForm.isAverageSinr" matTooltip="{{ 'isAverageSinr.tooltip' | translate }}"
            (change)="selected = 1;calculateForm.isAverageSinr = true">
              {{ 'isAverageSinr' | translate }}
            </mat-checkbox> -->
            <mat-checkbox [(ngModel)]="evaluationFuncForm.field.coverage.activate" (change)="changeEvaluationFuncCheckBox()" matTooltip="{{ 'isCoverage.tooltip' | translate }}">
              {{ 'isCoverage' | translate }}
              <button value="CoverageSetting" (click)="openFieldCoverageSetting()">{{ 'MutilFunctionSetting' | translate }}</button>
            </mat-checkbox>
            <mat-checkbox [(ngModel)]="evaluationFuncForm.field.sinr.activate" (change)="changeEvaluationFuncCheckBox()" matTooltip="{{ 'isSINR.tooltip' | translate }}">
              {{ 'isSINR' | translate }}
              <button value="SINRSetting" (click)="openSINRSetting()">{{ 'MutilFunctionSetting' | translate }}</button>
            </mat-checkbox>
            <mat-checkbox [(ngModel)]="evaluationFuncForm.field.rsrp.activate" (change)="changeEvaluationFuncCheckBox()" matTooltip="{{ 'isRSRP.tooltip' | translate }}">
              {{ 'isRSRP' | translate }}
              <button value="RSRPSetting" (click)="openRSRPSetting()">{{ 'MutilFunctionSetting' | translate }}</button>
            </mat-checkbox>

            <mat-checkbox [(ngModel)]="evaluationFuncForm.field.throughput.activate" (change)="changeEvaluationFuncCheckBox()" matTooltip="{{ 'isThroughput.tooltip' | translate }}">
              {{ 'isThroughput' | translate }}
              <button value="ThroughputSetting" (click)="openThroughputSetting()">{{ 'MutilFunctionSetting' | translate }}</button>
            </mat-checkbox>
            <!-- <mat-checkbox [(ngModel)]="calculateForm.isAvgThroughput" matTooltip="{{ 'isAverageThroughput.tooltip' | translate }}">
              {{ 'isAverageThroughput' | translate }}
            </mat-checkbox> -->
          </div>

          <mat-radio-group [(ngModel)]="planningIndex" (change)="changePlanningIndex()">
            <mat-radio-button class="block" value="2" matTooltip="{{ 'planning.ue.tooltip' | translate }}">
              {{ 'planning.ue' | translate }}
            </mat-radio-button>
          </mat-radio-group>
          <div *ngIf="planningIndex == '2'" class="subTarget">
            <!-- <mat-checkbox [(ngModel)]="calculateForm.isUeAvgSinr" matTooltip="{{ 'isUeAvgSinr.tooltip' | translate }}"
            [checked]="selected === 3" (change)="selected = 3">
              {{ 'isUeAvgSinr' | translate }}
            </mat-checkbox> -->
            <mat-checkbox [(ngModel)]="evaluationFuncForm.ue.throughputByRsrp.activate" (change)="changeEvaluationFuncCheckBox()" matTooltip="{{ 'isUeAvgThroughput.tooltip' | translate }}"
                          (change)="changePlanningTarget('isUeCoverage')">
              {{ 'isUeAvgThroughput' | translate }}
              <button value="UeAvgThroughput" (click)="openUEThroughputSetting()">{{ 'MutilFunctionSetting' | translate }}</button>
            </mat-checkbox>
            <mat-checkbox [(ngModel)]="evaluationFuncForm.ue.coverage.activate" (change)="changeEvaluationFuncCheckBox()" matTooltip="{{ 'isUeTpByDistance.tooltip' | translate }}"
                          (change)="changePlanningTarget('isUeCoverage')">
              {{ 'isUeCoverage' | translate }}
              <button value="CoverageSetting" (click)="openUECoverageSetting()">{{ 'MutilFunctionSetting' | translate }}</button>
            </mat-checkbox>
            <!-- <mat-checkbox [(ngModel)]="calculateForm.isUeTpByDistance" matTooltip="{{ 'isUeTpByDistance.tooltip' | translate }}">
              {{ 'isUeTpByDistance' | translate }}
            </mat-checkbox>
            <mat-checkbox [(ngModel)]="calculateForm.isUeTpByRsrp" matTooltip="{{ 'isUeTpByDistance.tooltip' | translate }}">
              {{ 'isUeTpByRsrp' | translate }}
            </mat-checkbox> -->
          </div>


          <p class="sub_title inline-block mt-2" *ngIf="planningIndex !== '3'">
            <ng-container *ngIf="calculateForm.objectiveIndex == '2' ; else oTemp">{{ 'availableNewBsNumber.wifi' | translate }}</ng-container>
            <ng-template #oTemp>{{ 'availableNewBsNumber.gen' | translate }}</ng-template>
          </p>
          <table class="sub_content inline-block" *ngIf="planningIndex !== '3'" style="height: 30px; width: 400px">
            <tbody>
              <mat-radio-group class="inline-block" style="display: flex" (change)="changeBsNumOpti()" [(ngModel)]="isBsNumberOptimization">
            <td>
              <mat-radio-button value="custom">{{ 'custom.BsNumberOptimization' | translate }}</mat-radio-button>
              <input type="number" style="float:center; margin-left: 1.5em;" class="inputNum" (change)="changeBsNumOpti()"
                     [(ngModel)]="calculateForm.availableNewBsNumber" [disabled]="isBsNumberOptimization == 'default'">
            </td>
            <td>
              <mat-radio-button value="default">{{ 'default.BsNumberOptimization' | translate }}</mat-radio-button>
            </td>
            </mat-radio-group>
            </tbody>
          </table>
          <p class="sub_title inline-block">
            <ng-container *ngIf="calculateForm.objectiveIndex == '2' ; else oTemp2">{{ 'availableNewBsNumber.wifi' | translate }}</ng-container>
            <ng-template #oTemp2>{{ 'maxConnectionNum' | translate }}</ng-template>
          </p>
          <div class="sub_content inline-block">
            <input type="number" class="inputNum" [(ngModel)]="calculateForm.maxConnectionNum">
          </div>

          <p class="block" *ngIf="planningIndex !== '3' && calculateForm.objectiveIndex == '0' && duplexMode === 'tdd'">4G TDD {{ 'parameterSetting' | translate }}</p>
          <p class="block" *ngIf="planningIndex !== '3' && calculateForm.objectiveIndex == '0' && duplexMode === 'fdd'">4G FDD {{ 'parameterSetting' | translate }}</p>
          <p class="block" *ngIf="planningIndex !== '3' && calculateForm.objectiveIndex == '1' && duplexMode === 'tdd'">5G TDD {{ 'parameterSetting' | translate }}</p>
          <p class="block" *ngIf="planningIndex !== '3' && calculateForm.objectiveIndex == '1' && duplexMode === 'fdd'">5G FDD {{ 'parameterSetting' | translate }}</p>
          <p class="block" *ngIf="planningIndex !== '3' && calculateForm.objectiveIndex == '2'">{{ 'wifiParam' | translate }}</p>
          <table *ngIf="planningIndex !== '3'" class="tempCalParamTable">
            <tbody>
              <tr>
                <td>{{ 'planning.net' | translate }}</td>
                <td>
                  <select [(ngModel)]="calculateForm.objectiveIndex" (change)="protocolSwitchWarning()">
                    <!-- <option value="0">4G</option> -->
                    <option value="1">5G</option>
                    <!-- <option value="2">WiFi</option> -->
                  </select>
                </td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex != '2'">
                <td>{{ 'duplex' | translate }}</td>
                <td>
                  <mat-radio-group class="inline-block" [(ngModel)]="duplexMode">
                    <!-- <mat-radio-group [(ngModel)]="duplexMode"> -->
                    <!-- <mat-radio-button value="tdd">TDD</mat-radio-button> -->
                    <mat-radio-button value="tdd" style="width: 100px;" (click)="changeProtoOrDuplex()">TDD</mat-radio-button>
                    <mat-radio-button value="fdd" style="width: 100px;" (click)="changeProtoOrDuplex()">FDD</mat-radio-button>
                  </mat-radio-group>
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'tdd' && calculateForm.objectiveIndex != '2'">
                <td>{{ 'upDownRatio' | translate }}</td>
                <td>
                  {{ 'dlRatio' | translate }}<input type="number" class="inputNum" max=100 min=0 [(ngModel)]="dlRatio">% ({{ 'ulRatio' | translate }}{{ 100 - dlRatio}}%)
                </td>
              </tr>
              <tr>
                <td>{{ 'powerRange' | translate }}</td>
                <td>
                  <input type="number" class="inputNumPower" [(ngModel)]="calculateForm.powerMinRange" placeholder="{{ 'powerMinRange' | translate }}">
                  ~
                  <input [(ngModel)]="calculateForm.powerMaxRange" type="number" class="inputNumPower" placeholder="{{ 'powerMaxRange' | translate }}">dBm
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'tdd' && calculateForm.objectiveIndex != '2'">
                <td>{{ 'tddfrequency' | translate }}</td>
                <td>
                  <input type="number" step="5" class="inputNum" max="10000" min="0"
                         [(ngModel)]="tempCalParamSet.tddfrequency"
                         (select)="tempParamStorage(tempCalParamSet.tddfrequency)"
                         (click)="tempParamStorage(tempCalParamSet.tddfrequency)"
                         (change)="changeFrequency(svgId, '', true)">MHz
                </td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex == '1'">
                <td>{{ 'scalingFactor' | translate }}</td>
                <td><input type="number" step="0.1" min="0" max="1" class="inputNum" [(ngModel)]="scalingFactor"></td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex == '2'">
                <td>{{ 'tddfrequency' | translate }}</td>
                <td *ngIf="tempCalParamSet.wifiProtocol != 'wifi5'">
                  <select type="number" class="inputNum"
                          [(ngModel)]="tempCalParamSet.wifiFrequency">
                    <option *ngFor="let band of wifiFreqList2_4g" [ngValue]="band">{{band}}</option>
                    <option *ngFor="let band of wifiFreqList5g" [ngValue]="band">{{band}}</option>
                  </select>
                </td>
                <td *ngIf="tempCalParamSet.wifiProtocol == 'wifi5'">
                  <select type="number" class="inputNum"
                          [(ngModel)]="tempCalParamSet.wifiFrequency">
                    <option *ngFor="let band of wifiFreqList5g" [ngValue]="band">{{band}}</option>
                  </select>
                </td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex == '2'">
                <td>{{ 'wifiProtocol' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.wifiProtocol"
                          (change)="changeWifiProtocol(tempCalParamSet.wifiProtocol,true)">
                    <option value="wifi4">WiFi4</option>
                    <option value="wifi5">WiFi5</option>
                    <option value="wifi6">WiFi6</option>
                  </select>
                </td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex == '2'">
                <td>{{ 'tddBandwidth' | translate }}</td>
                <td *ngIf="tempCalParamSet.wifiProtocol == 'wifi4'">
                  <select type="number" class="inputNum" step="5"
                          [(ngModel)]="tempCalParamSet.wifiBandwidth"
                          (change)="changeBandwidth('', true)">
                    <option value="20">20</option>
                    <option value="40">40</option>
                  </select>MHz
                </td>
                <td *ngIf="tempCalParamSet.wifiProtocol == 'wifi5'">
                  <select type="number" class="inputNum" step="5"
                          [(ngModel)]="tempCalParamSet.wifiBandwidth"
                          (change)="changeBandwidth('', true)">
                    <option value="40">40</option>
                    <option value="80">80</option>
                    <option value="160">160</option>
                  </select>MHz
                </td>
                <td *ngIf="tempCalParamSet.wifiProtocol == 'wifi6'">
                  <select type="number" class="inputNum" step="5"
                          [(ngModel)]="tempCalParamSet.wifiBandwidth"
                          (change)="changeBandwidth('', true)">
                    <option value="20">20</option>
                    <option value="40">40</option>
                    <option value="80">80</option>
                    <option value="160">160</option>
                  </select>MHz
                </td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex == '2'">
                <td>{{ 'guardInterval' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.guardInterval">
                    <option *ngIf="tempCalParamSet.wifiProtocol != 'wifi6'" value="400ns">400ns</option>
                    <option value="800ns">800ns</option>
                    <option *ngIf="tempCalParamSet.wifiProtocol == 'wifi6'" value="1600ns">1600ns</option>
                    <option *ngIf="tempCalParamSet.wifiProtocol == 'wifi6'" value="3200ns">3200ns</option>
                  </select>
                </td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex == '2'">
                <td>{{ 'wifiMimo' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.wifiMimo">
                    <!-- <option value="1x1">1x1</option> -->
                    <option value="2x2">2x2</option>
                    <option value="3x3">3x3</option>
                    <option value="4x4">4x4</option>
                    <option *ngIf="tempCalParamSet.wifiProtocol != 'wifi4'" value="8x8">8x8</option>
                  </select>
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'tdd' && calculateForm.objectiveIndex == '0'">
                <td>{{ 'tddBandwidth' | translate }}</td>
                <td>
                  <select type="number" class="inputNum" step="5"
                          [(ngModel)]="tempCalParamSet.tddbandwidth"
                          (change)="changeBandwidth('', true)">
                    <option value="1.4">1.4</option>
                    <option value="3">3</option>
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                  </select>MHz
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'fdd' && calculateForm.objectiveIndex != '2'">
                <td>{{ 'uplink.frequency' | translate }}</td>
                <td>
                  <input type="number" class="inputNumFreq" step="5" max="10000" min="0"
                         [(ngModel)]="tempCalParamSet.fddUlFrequency"
                         (select)="tempParamStorage(tempCalParamSet.fddUlFrequency)"
                         (click)="tempParamStorage(tempCalParamSet.fddUlFrequency)"
                         (change)="changeFrequency(svgId, 'ul', true)">MHz
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'fdd' && calculateForm.objectiveIndex != '2'">
                <td>{{ 'downlink.frequency' | translate }}</td>
                <td>
                  <input type="number" class="inputNumFreq" step="5" max="10000" min="0"
                         [(ngModel)]="tempCalParamSet.fddDlFrequency"
                         (select)="tempParamStorage(tempCalParamSet.fddDlFrequency)"
                         (click)="tempParamStorage(tempCalParamSet.fddDlFrequency)"
                         (change)="changeFrequency(svgId, 'dl', true)">MHz
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'fdd' && calculateForm.objectiveIndex == '0'">
                <td>{{ 'ulBandwidth' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.ulBandwidth"
                          (change)="changeBandwidth('ul', true)">
                    <option value="1.4">1.4</option>
                    <option value="3">3</option>
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                  </select>MHz
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'fdd' && calculateForm.objectiveIndex == '0'">
                <td>{{ 'dlBandwidth' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.dlBandwidth"
                          (change)="changeBandwidth('dl', true)">
                    <option value="1.4">1.4</option>
                    <option value="3">3</option>
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                  </select>MHz
                </td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex == '0'">
                <td>{{ 'mimoNum' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.mimoNumber4G">
                    <ng-container *ngIf="planningIndex == '3' ; else otherMimoNumber4G">
                      <option value=1>1</option>
                      <option value=2>2</option>
                      <option value=3>3</option>
                      <option value=4>4</option>
                    </ng-container>
                    <ng-template #otherMimoNumber4G>
                      <option value=1>1</option>
                      <option value=2>2</option>
                      <option value=4>4</option>
                      <option value=8>8</option>
                    </ng-template>
                  </select>
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'tdd' && calculateForm.objectiveIndex == '1'">
                <td>{{ 'subcarrier' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.tddscs"
                          (change)="changeScs(tempCalParamSet.tddscs, 'tdd', true)">
                    <option value=15>15</option>
                    <option value=30>30</option>
                    <option value=60>60</option>
                  </select>kHz
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'tdd' && calculateForm.objectiveIndex == '1'">
                <td>{{ 'scsBandwidth' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.tddbandwidth"
                          (change)="changeBandwidth('', true)" *ngIf="tempCalParamSet.tddscs == '15'">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                    <option value="25">25</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                  </select>
                  <select [(ngModel)]="tempCalParamSet.tddbandwidth"
                          (change)="changeBandwidth('', true)" *ngIf="tempCalParamSet.tddscs == '30'">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                    <option value="25">25</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                    <option value="60">60</option>
                    <option value="70">70</option>
                    <option value="80">80</option>
                    <option value="90">90</option>
                    <option value="100">100</option>
                  </select>
                  <select [(ngModel)]="tempCalParamSet.tddbandwidth"
                          (change)="changeBandwidth('', true)"
                          *ngIf="tempCalParamSet.tddscs == '60'">
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                    <option value="25">25</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                    <option value="60">60</option>
                    <option value="70">70</option>
                    <option value="80">80</option>
                    <option value="90">90</option>
                    <option value="100">100</option>
                  </select>MHz
                </td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex == '1'">
                <td>{{ 'ulMimolayer' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.ulMimoLayer">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="4">4</option>
                    <option value="8">8</option>
                  </select>
                </td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex == '1'">
                <td>{{ 'dlMimolayer' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.dlMimoLayer">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="4">4</option>
                    <option value="8">8</option>
                  </select>
                </td>
              </tr>

              <tr *ngIf="duplexMode === 'fdd' && calculateForm.objectiveIndex == '1'">
                <td>{{ 'ulSubcarrier' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.ulScs"
                          (change)="changeScs(tempCalParamSet.ulScs, 'ul', true)">
                    <option value=15>15</option>
                    <option value=30>30</option>
                    <option value=60>60</option>
                  </select>kHz
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'fdd' && calculateForm.objectiveIndex == '1'">
                <td>{{ 'ulBandwidth' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.ulBandwidth"
                          (change)="changeBandwidth('ul', true)"
                          *ngIf="tempCalParamSet.ulScs == '15'">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                    <option value="25">25</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                  </select>
                  <select [(ngModel)]="tempCalParamSet.ulBandwidth"
                          (change)="changeBandwidth('ul', true)"
                          *ngIf="tempCalParamSet.ulScs == '30'">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                    <option value="25">25</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                    <option value="60">60</option>
                    <option value="70">70</option>
                    <option value="80">80</option>
                    <option value="90">90</option>
                    <option value="100">100</option>
                  </select>
                  <select [(ngModel)]="tempCalParamSet.ulBandwidth"
                          (change)="changeBandwidth('ul', true)"
                          *ngIf="tempCalParamSet.ulScs == '60'">
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                    <option value="25">25</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                    <option value="60">60</option>
                    <option value="70">70</option>
                    <option value="80">80</option>
                    <option value="90">90</option>
                    <option value="100">100</option>
                  </select>MHz
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'fdd' && calculateForm.objectiveIndex == '1'">
                <td>{{ 'dlSubcarrier' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.dlScs"
                          (change)="changeScs(tempCalParamSet.dlScs, 'dl', true)">
                    <option value=15>15</option>
                    <option value=30>30</option>
                    <option value=60>60</option>
                  </select>kHz
                </td>
              </tr>
              <tr *ngIf="duplexMode === 'fdd' && calculateForm.objectiveIndex == '1'">
                <td>{{ 'dlBandwidth' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.dlBandwidth"
                          (change)="changeBandwidth('dl', true)"
                          *ngIf="tempCalParamSet.dlScs == '15'">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                    <option value="25">25</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                  </select>
                  <select [(ngModel)]="tempCalParamSet.dlBandwidth"
                          (change)="changeBandwidth('dl', true)"
                          *ngIf="tempCalParamSet.dlScs == '30'">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                    <option value="25">25</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                    <option value="60">60</option>
                    <option value="70">70</option>
                    <option value="80">80</option>
                    <option value="90">90</option>
                    <option value="100">100</option>
                  </select>
                  <select [(ngModel)]="tempCalParamSet.dlBandwidth"
                          (change)="changeBandwidth('dl', true)"
                          *ngIf="tempCalParamSet.dlScs == '60'">
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                    <option value="25">25</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                    <option value="60">60</option>
                    <option value="70">70</option>
                    <option value="80">80</option>
                    <option value="90">90</option>
                    <option value="100">100</option>
                  </select>MHz
                </td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex == '1'">
                <td>{{ 'ULModulationCodingScheme' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.ulModulationCodScheme" style="width: 150px;">
                    <ng-container *ngIf="planningIndex == '3' ; else othterUlModulationCodScheme">
                      <option value="64QAM-table">64QAM-table</option>
                      <option value="256QAM-table">256QAM-table</option>
                      <option value="64QAM-table-lowSE">64QAM-table-lowSE</option>
                    </ng-container>
                    <ng-template #othterUlModulationCodScheme>
                      <option value="64QAM-table">64QAM-table</option>
                      <option value="256QAM-table">256QAM-table</option>
                      <option value="64QAM-table-lowSE">64QAM-table-lowSE</option>
                    </ng-template>
                  </select>
                </td>
              </tr>
              <tr *ngIf="calculateForm.objectiveIndex == '1'">
                <td>{{ 'DLModulationCodingScheme' | translate }}</td>
                <td>
                  <select [(ngModel)]="tempCalParamSet.dlModulationCodScheme" style="width: 150px;">
                    <ng-container *ngIf="planningIndex == '3' ; else othterUlModulationCodScheme">
                      <option value="64QAM-table">64QAM-table</option>
                      <option value="256QAM-table">256QAM-table</option>
                      <option value="64QAM-Low-SE">64QAM-Low-SE</option>
                    </ng-container>
                    <ng-template #othterUlModulationCodScheme>
                      <option value="64QAM-table">64QAM-table</option>
                      <option value="256QAM-table">256QAM-table</option>
                      <option value="64QAM-table-lowSE">64QAM-table-lowSE</option>
                    </ng-template>
                  </select>
                </td>
              </tr>
              <ng-container *ngIf="calculateForm.objectiveIndex == '1'">
                <tr>
                  <td>{{ 'noise' | translate }}</td>
                  <td><input type="number" step="0.1" min="0" max="1" class="inputNum" [(ngModel)]="tempCalParamSet.bsNoiseFigure">dB</td>
                </tr>
                
                
                <!--
  <tr>
    <td>{{ 'antenna' | translate }}</td>
    <td>
      <select style="width: 165px;" [(ngModel)]="tempCalParamSet.AntennaId" (change)="antennaChangeCheck(null)" [disabled]="planningIndex != '3'">
        <ng-container *ngFor="let item of antennaList;">
          <option *ngIf="item.manufactor == manufactorCal || manufactorCal == 'All'" value={{item.antennaID}}>
                  <ng-container *ngIf="item.property == 'default'">
                    <ng-container *ngIf="checkIfChinese() == true">{{ item.chinese_name }}</ng-container>
                    <ng-container *ngIf="checkIfChinese() == false">{{ item.antennaName }}</ng-container>
                  </ng-container>
                  <ng-container *ngIf="item.property == 'customized' ">
                    <ng-container *ngIf="checkIfChinese() == true">{{ 'customize' | translate }}_{{ item.chinese_name }}</ng-container>
                    <ng-container *ngIf="checkIfChinese() == false">{{ 'customize' | translate }}_{{ item.antennaName }}</ng-container>
                  </ng-container>
                </option>
              </ng-container>
                    </select>
                  </td>
                </tr>
                <ng-container *ngIf="antennaList[AntennaIdToIndex[tempCalParamSet.AntennaId]]['antennaType'] == 'Directional'  ; else txGainColumnCalculation">
                  <tr>
                    <td>{{ 'theta' | translate }}: {{ 'angleWithZaxis' | translate }}</td>
                    <td>
                      <input type="number" class="inputNum" step="1"
                             [(ngModel)]="tempCalParamSet.theta"
                             (select)="tempParamStorage(tempCalParamSet.theta)"
                             (click)="tempParamStorage(tempCalParamSet.theta)"
                             (change)="changeTheta(svgId, true)">{{ 'angle' | translate }}
                      (<a href="javascript:void(0)" style="color: white;" (click)="coordinateInfo()">{{ 'info' | translate }}</a>)
                    </td>
                  </tr>
                  <tr>
                    <td>{{ 'phi' | translate }}: {{ 'angleWithXaxis' | translate }}</td>
                    <td>
                      <input type="number" class="inputNum" step="1"
                             [(ngModel)]="tempCalParamSet.phi"
                             (select)="tempParamStorage(tempCalParamSet.phi)"
                             (click)="tempParamStorage(tempCalParamSet.phi)"
                             (change)="changePhi(svgId, true)">{{ 'angle' | translate }}
                      (<a href="javascript:void(0)" style="color: white;" (click)="coordinateInfo()">{{ 'info' | translate }}</a>)
                    </td>
                  </tr>
                </ng-container>
                <ng-template #txGainColumnCalculation>
                  <tr>
                    <td>{{ 'TxGain' | translate }}</td>
                    <td><input type="number" step="0.1" min="0" max="1" class="inputNum" [(ngModel)]="tempCalParamSet.bsTxGain">dB</td>
                  </tr>
                </ng-template>-->
              </ng-container>
            </tbody>
          </table>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel (opened)="panelOpenState = true"
                           (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>{{ 'planning.setting' | translate }}</mat-panel-title>
        </mat-expansion-panel-header>
        <div class="areaSetting">
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>{{ 'planning.info' | translate }}</mat-panel-title>
            </mat-expansion-panel-header>
            <ul>
              <li>
                <p>{{ 'taskName' | translate }}</p>
                <input type="text" [(ngModel)]="calculateForm.taskName" class="w18">
              </li>
              <li>
                <p style="margin-right: 5px;">{{ 'planning.upload' | translate }}</p>
                <label id="uploadFileLabel" for="upload-file">
                  {{ 'planning.file.upload' | translate }}
                  <input type="file" id="upload-file" (change)="fileChange($event)" title="" hidden="hidden">
                </label>
                <span style="margin-left: 2em;" *ngIf="showFileName">{{ calculateForm.mapName }}</span>
              </li>
              <li>
                <p>{{ 'planning.size' | translate }}</p>
                <ul class="inline-block">
                  <li class="inline-block">
                    <label>{{ 'width' | translate }}</label>
                    <input type="number" class="inputNum" step="1"
                           [(ngModel)]="calculateForm.width"
                           (click)="tempParamStorage(calculateForm.width)"
                           (change)="checkFieldWidHei('width')" disabled>
                    <!-- (change)="initData(false, false, 'width')"> -->
                    <!-- <input type="text" [(ngModel)]="calculateForm.width" (change)="initData(false, false)"> -->
                  </li>
                  <li class="inline-block">
                    <label>{{ 'height' | translate }}</label>
                    <input type="number" class="inputNum" step="1"
                           [(ngModel)]="calculateForm.height"
                           (click)="tempParamStorage(calculateForm.height)"
                           (change)="checkFieldWidHei('height')" disabled>
                    <!-- (change)="initData(false, false, 'height')"> -->
                    <!-- <input type="text" [(ngModel)]="calculateForm.height" (change)="initData(false, false)"> -->
                  </li>
                  <li class="inline-block">
                    <label>{{ 'altitude' | translate }}</label>
                    <input type="number" class="inputNum" step="1"
                           [(ngModel)]="calculateForm.altitude"
                           (click)="tempParamStorage(calculateForm.altitude)"
                           (change)="initData(false, false, 'altitude')">
                    <!-- <input type="text" [(ngModel)]="calculateForm.altitude" (change)="initData(false, false)"> -->
                  </li>
                </ul>
              </li>
              <li *ngIf="planningIndex == '3'">
                <p>{{ 'planning.net' | translate }}	</p>
                <select [(ngModel)]="calculateForm.objectiveIndex" (change)="protocolSwitchWarning()">
                  <!-- <option value="0">4G</option> -->
                  <option value="1">5G</option>
                  <!-- <option value="2">WiFi</option> -->
                </select>
              </li>
              <!-- <ng-container *ngIf="calculateForm.objectiveIndex == '1'">
                <li>
                  <p>{{ 'subcarrier' | translate }}	</p>
                  <select [(ngModel)]="subcarrier">
                    <option value="15">15</option>
                    <option value="30">30</option>
                    <option value="60">60</option>
                    <option value="120">120</option>
                  </select>
                </li>
              </ng-container> -->

              <li *ngIf="calculateForm.objectiveIndex != '2' && planningIndex == '3'">
                <p>{{ 'duplex' | translate }}	</p>
                <!-- <mat-radio-group [(ngModel)]="duplexMode"> -->
                <mat-radio-group [(ngModel)]="duplexMode">
                  <!-- <mat-radio-button value="tdd">TDD</mat-radio-button> -->
                  <mat-radio-button value="tdd" (click)="changeProtoOrDuplex()">TDD</mat-radio-button>
                  <mat-radio-button value="fdd" (click)="changeProtoOrDuplex()">FDD</mat-radio-button>
                </mat-radio-group>
              </li>

              <!-- <li *ngIf="calculateForm.objectiveIndex == '2'">
                <p>{{ 'wifiProtocol' | translate }}	</p>
                <mat-radio-group [(ngModel)]="wifiProtocol">
                  <mat-radio-button value="0">{{ 'wifi4' | translate }}</mat-radio-button>
                  <mat-radio-button value="1">{{ 'wifi5' | translate }}</mat-radio-button>
                </mat-radio-group>
              </li> -->
              <!-- <li *ngIf="calculateForm.objectiveIndex == '2'">
                <p>{{ 'guardInterval' | translate }}	</p>
                <mat-radio-group [(ngModel)]="guardInterval">
                  <mat-radio-button value="0">400ns</mat-radio-button>
                  <mat-radio-button value="1">800ns</mat-radio-button>
                </mat-radio-group>
              </li> -->
              <!-- <li>
                <p>{{ 'mimoNum' | translate }}	</p>
                <select [(ngModel)]="mimoNum" style="width: 100px;" >
                  <option value="0">1x1</option>
                  <option value="1">2x2</option>
                  <option value="2">3x3</option>
                </select>
              </li> -->

              <li *ngIf="calculateForm.objectiveIndex != '2' && duplexMode === 'tdd' && planningIndex == '3'">
                <p>{{ 'upDownRatio' | translate }}	</p>
                {{ 'dlRatio' | translate }}<input type="number" max=100 min=0 [(ngModel)]="dlRatio">% ({{ 'ulRatio' | translate }}{{ 100 - dlRatio}}%)
              </li>

              <li *ngIf="calculateForm.objectiveIndex == '1' && planningIndex == '3'">
                <p>{{ 'scalingFactor' | translate }}	</p>
                <input type="number" class="inputNum" step="0.1" min="0" max="1" [(ngModel)]="scalingFactor">
              </li>

              <!-- <li *ngIf="calculateForm.objectiveIndex != '2' && planningIndex == '3'">
                <p>Smart Antenna</p>
                <mat-radio-group [(ngModel)]="useSmartAntenna">
                  <mat-radio-button value="true" (click)="test()">啟用</mat-radio-button>
                  <mat-radio-button value="false" (click)="test()">停用</mat-radio-button>
                </mat-radio-group>
              </li> -->

              <li>
                <p>{{ 'rsrp_coverage_th' | translate }}	</p>
                <input style="margin-left: 1em" type="number" class="inputNum" step="1" min="-140" max="-44" [(ngModel)]="rsrpThreshold" (change)="changeRsrpThreshold()"> dBm
              </li>
              <li>
                <p>{{ 'sinr_coverage_th' | translate }}	</p>
                <input style="margin-left: 1em" type="number" class="inputNum" step="1" min="-23" max="40" [(ngModel)]="sinrThreshold" (change)="changeSinrThreshold()"> dB
              </li>

              <!-- <li *ngIf="calculateForm.objectiveIndex !== '2'">
                <p>{{ 'uplink.frequency' | translate }}</p>
                <span>
                  <input type="text" [(ngModel)]="ulFrequency">
                </span>
                <p>{{ 'downlink.frequency' | translate }}</p>
                <span>
                  <input type="text" [(ngModel)]="dlFrequency">
                </span>
              </li> -->

              <li *ngIf="calculateForm.objectiveIndex == '2'">
                <p>{{ 'wifiFrequency' | translate }}</p>
                <select [(ngModel)]="wifiFrequency" (change)="changeWifiFrequency()">
                  <option value="0">sub-1GHz</option>
                  <option value="1">2.4GHz</option>
                  <option value="2">5GHz</option>
                </select>
              </li>

              <li *ngIf="calculateForm.objectiveIndex == '2'">
                <p>{{ 'powerRange' | translate }}</p>
                <span>
                  <input type="number" class="inputNum" step="1" [(ngModel)]="calculateForm.powerMinRange" placeholder="{{ 'powerMinRange' | translate }}">
                  ~
                  <input [(ngModel)]="calculateForm.powerMaxRange" type="number" class="inputNum" step="1" placeholder="{{ 'powerMaxRange' | translate }}">dBm
                </span>
              </li>

              <li>
                <p style="display: block;">{{ 'z.height' | translate }}<span> {{ 'z.height.note' | translate }} </span></p>
                <ol class="inline-block">
                  <li><input type="number" class="inputNum" [(ngModel)]="zValues[0]" (change)="checkHeiWidAlt('0',zValues[0],zValues)"></li>
                  <li><input type="number" class="inputNum" [(ngModel)]="zValues[1]" (change)="checkHeiWidAlt('1',zValues[1],zValues)"></li>
                  <li><input type="number" class="inputNum" [(ngModel)]="zValues[2]" (change)="checkHeiWidAlt('2',zValues[2],zValues)"></li>
                </ol>
              </li>

              <li>
                <!-- 右方場域基本資訊新增材質列表 -->
                <p> {{ 'materialList' | translate }} </p>
                <span class="inline-block">
                  <select style="width: 12em;" (change)="materialCustomizeDialog($event.target.value)" [(ngModel)]="materialId">
                    <ng-container *ngFor="let item of materialList;">
                      <!-- <option value={{item.id}} *ngFor="let item of materialList"> -->
                      <option *ngIf="deleteMaterialList.includes(item.id) == false" value={{item.id}}>
                        <ng-container *ngIf="item.property == 'default'">
                          <ng-container *ngIf="checkIfChinese() == true">{{ item.chineseName }}</ng-container>
                          <ng-container *ngIf="checkIfChinese() == false">{{ item.name }}</ng-container>
                        </ng-container>
                        <ng-container *ngIf="item.property == 'customized' ">
                          <ng-container *ngIf="checkIfChinese() == true">{{ 'customize' | translate }}_{{ item.chineseName }}</ng-container>
                          <ng-container *ngIf="checkIfChinese() == false">{{ 'customize' | translate }}_{{ item.name }}</ng-container>
                        </ng-container>
                      </option>
                    </ng-container>
                    <!-- <option value="1">{{ 'material.wood' | translate }}</option>
                    <option value="2">{{ 'material.cement' | translate }}</option>
                    <option value="3">{{ 'material.light_steel_frame' | translate }}</option>
                    <option value="4">{{ 'material.glass' | translate }}</option>
                    <option value="5">{{ 'material.stainless' | translate }}</option>
                    <option value="6">{{ 'material.fireproof' | translate }}</option>
                    <option value="7">{{ 'material.fireSoundproof' | translate }}</option>
                    <option value="8">{{ 'material.whiteBrick' | translate }}</option>
                     -->
                    <option value=999>【{{ 'material.customize' | translate }}】</option>
                  </select>
                </span>
              </li>
              <li>
                <p> {{ 'resolution' | translate }} </p>
                <span class="inline-block">
                  <select style="width: 13.21em;" [(ngModel)]="calculateForm.resolution">
                    <option *ngFor="let item of resolutionList" [value]="item">
                      {{ item }} x {{ item }} ({{ 'meter' | translate }})
                    </option>
                    <!-- <option value="1">1 x 1 ({{ 'meter' | translate }})</option>
                    <option value="2">2 x 2 ({{ 'meter' | translate }})</option>
                    <option value="4">4 x 4 ({{ 'meter' | translate }})</option>
                    <option value="6">6 x 6 ({{ 'meter' | translate }})</option>
                    <option value="8">8 x 8 ({{ 'meter' | translate }})</option>
                    <option value="10">10 x 10 ({{ 'meter' | translate }})</option> -->
                  </select>
                </span>
              </li>
              <li>
                <p>{{ 'compassDirection' | translate }}</p>
                <input type="number" class="inputNum" step="1" min="0" max="360" [(ngModel)]="calculateForm.geographicalNorth">
                {{ 'angle' | translate }}
              </li>
            </ul>
          </mat-expansion-panel>

          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title [class]="subitemClass['obstacle']">
                {{ 'planning.obstacleInfo' | translate }}
                <label class="matBadge">{{ obstacleList.length }}</label>
              </mat-panel-title>
            </mat-expansion-panel-header>

            <div *ngIf="obstacleList.length == 0" style="width: 100%; text-align: center">
              {{ 'planning.no.obstacle' | translate }}
            </div>
            <span *ngIf="obstacleList.length > 0" class="clearAll" (click)="clearAll('obstacle')">
              <span class="material-icons">clear</span>Clear All
            </span>
            <ol>
              <li *ngFor="let item of obstacleList">
                <span>
                  <label>X</label>
                  <input type="text" [(ngModel)]="dragObject[item].x"
                         (select)="tempParamStorage(dragObject[item].x)"
                         (click)="tempParamStorage(dragObject[item].x);"
                         (change)="changePosition('x',item)">
                </span>
                <span>
                  <label>Y</label>
                  <input type="text" [(ngModel)]="dragObject[item].y"
                         (select)="tempParamStorage(dragObject[item].y)"
                         (click)="tempParamStorage(dragObject[item].y)"
                         (change)="changePosition('y',item)">
                </span>
                <br>
                <span>
                  <label>{{ 'altitude.start' | translate }}</label>
                  <input type="text" [(ngModel)]="dragObject[item].z"
                         (select)="tempParamStorage(dragObject[item].z)"
                         (click)="tempParamStorage(dragObject[item].z)"
                         (change)="changeZvalue(item)">
                </span>
                <span>
                  <label>{{ 'altitude.obstacle' | translate }}</label>
                  <input type="text" [(ngModel)]="dragObject[item].altitude"
                         (select)="tempParamStorage(dragObject[item].altitude)"
                         (click)="tempParamStorage(dragObject[item].altitude)"
                         (change)="changeSize(item, 'altitude',true)">
                  <!-- <input type="text" [(ngModel)]="dragObject[item].altitude" (change)="checkAltitude(dragObject[item].altitude,null)"> -->
                </span>
                <br>
                <span>
                  <label>{{ 'width' | translate }}</label>
                  <input type="text" [(ngModel)]="dragObject[item].width"
                         (select)="tempParamStorage(dragObject[item].width)"
                         (click)="tempParamStorage(dragObject[item].width)"
                         (change)="changeSize(item, 'width', true)">
                </span>
                <span>
                  <label>{{ 'height' | translate }}</label>
                  <input type="text" [(ngModel)]="dragObject[item].height"
                         (select)="tempParamStorage(dragObject[item].height)"
                         (click)="tempParamStorage(dragObject[item].height)"
                         (change)="changeSize(item, 'height',true)">
                </span>
                <span>
                  <label>{{ 'rotate' | translate }}</label>
                  <input type="text" [(ngModel)]="dragObject[item].rotate"
                         (select)="tempParamStorage(dragObject[item].rotate)"
                         (click)="tempParamStorage(dragObject[item].rotate)"
                         (change)="changeRotate(item)"
                         [attr.disabled]="item.split('_')[0] == 'ellipse' ? true : null">
                </span>
                <span>
                  <!-- 右方場域障礙物資訊 -->
                  <label>{{ 'material' | translate }}</label>
                  <select class="w7em" [(ngModel)]="dragObject[item].material" (change)="setMaterialName(item,dragObject[item].material);">
                    <ng-container *ngFor="let item of materialList;">
                      <!-- <option value={{item.id}} *ngFor="let item of materialList"> -->
                      <option *ngIf="deleteMaterialList.includes(item.id) == false" value={{item.id}}>
                        <ng-container *ngIf="item.property == 'default'">
                          <ng-container *ngIf="checkIfChinese() == true">{{ item.chineseName }}</ng-container>
                          <ng-container *ngIf="checkIfChinese() == false">{{ item.name }}</ng-container>
                        </ng-container>
                        <ng-container *ngIf="item.property == 'customized' ">
                          <ng-container *ngIf="checkIfChinese() == true">{{ 'customize' | translate }}_{{ item.chineseName }}</ng-container>
                          <ng-container *ngIf="checkIfChinese() == false">{{ 'customize' | translate }}_{{ item.name }}</ng-container>
                        </ng-container>
                      </option>
                    </ng-container>
                    <!-- <option value="0">{{ 'material.wood' | translate }}</option>
          <option value="1">{{ 'material.cement' | translate }}</option>
          <option value="2">{{ 'material.light_steel_frame' | translate }}</option>
          <option value="3">{{ 'material.glass' | translate }}</option>
          <option value="4">{{ 'material.stainless' | translate }}</option>
          <option value="5">{{ 'material.fireproof' | translate }}</option>
          <option value="6">{{ 'material.fireSoundproof' | translate }}</option>
          <option value="7">{{ 'material.whiteBrick' | translate }}</option>
          <option value="8">{{ 'material.flameproof' | translate }}</option>
          <option value="9">{{ 'material.flameSoundproof' | translate }}</option>
          <option value="10">{{ 'material.cabinet' | translate }}</option>
          <option value="7">{{ 'material.whiteBrick' | translate }}</option>-->
                  </select>
                </span>
                <span class="clearAll clearOne ml-3" (click)="removeObj(item)">
                  <span class="material-icons">clear</span>
                </span>
              </li>
            </ol>
          </mat-expansion-panel>

          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{ 'planning.defaultBs.info' | translate }}
                <label class="matBadge">{{ defaultBSList.length }}</label>

              </mat-panel-title>
            </mat-expansion-panel-header>
            <div *ngIf="defaultBSList.length == 0" style="width: 100%; text-align: center">
              {{ 'planning.no.defaultBs' | translate }}
            </div>
            <span *ngIf="defaultBSList.length > 0" class="clearAll" (click)="clearAll('defaultBS')">
              <span class="material-icons">clear</span>Clear All
            </span>

            <ul>
              <li>
                <ol>
                  <li *ngFor="let item of defaultBSList; let i = index;">
                    <span>
                      <label>X</label>
                      <input type="text" [(ngModel)]="dragObject[item].x"
                             (select)="tempParamStorage(dragObject[item].x)"
                             (click)="tempParamStorage(dragObject[item].x)"
                             (change)="changePosition('x',item)">
                    </span>
                    <span>
                      <label>Y</label>
                      <input type="text" [(ngModel)]="dragObject[item].y"
                             (select)="tempParamStorage(dragObject[item].y)"
                             (click)="tempParamStorage(dragObject[item].y)"
                             (change)="changePosition('y',item)">
                    </span>
                    <span>
                      <label>Z</label>
                      <input type="text" [(ngModel)]="dragObject[item].altitude">
                    </span>
                    <!-- <span>
            <label>Txpower</label>
            <input type="text" [(ngModel)]="bsListRfParam[item].txpower" (change)="changeTxBfFreq(item)">
          </span>
          <span>
            <label>Beam</label>
            <input type="text" [(ngModel)]="bsListRfParam[item].beampattern" (change)="changeTxBfFreq(item)">
          </span>
          <span>
            <label>Frequency</label>
            <input type="text" [(ngModel)]="bsListRfParam[item].frequency" (change)="changeTxBfFreq(item)">
          </span> -->
                    <!-- <span (click)="openRfParamSetting(item)">
            <span class="material-icons">{{ 'rfParamLink' | translate }}</span>
          </span> -->
                    <span class="clearAll clearOne ml-3" (click)="removeObj(item)">
                      <span class="material-icons">clear</span>
                    </span>
                    <br>
                    <button class="rfBtns" mat-stroked-button color="primary" (click)="openRfParamSetting(item, i, true)">{{ 'rfParamLink' | translate }}</button>
                  </li>
                </ol>
              </li>
            </ul>
          </mat-expansion-panel>

          <mat-expansion-panel *ngIf="planningIndex !== '3'">
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{ 'planning.candidateBs.info' | translate }}
                <label class="matBadge">{{ candidateList.length }}</label>
              </mat-panel-title>
            </mat-expansion-panel-header>

            <div *ngIf="candidateList.length == 0" style="width: 100%; text-align: center">
              {{ 'planning.no.candidateBs' | translate }}
            </div>

            <span *ngIf="candidateList.length > 0" class="clearAll" (click)="clearAll('candidate')">
              <span class="material-icons">clear</span>Clear All
            </span>
            <ol>
              <li *ngFor="let item of candidateList">
                <span>
                  <label>X</label>
                  <input type="text" [(ngModel)]="dragObject[item].x"
                         (select)="tempParamStorage(dragObject[item].x)"
                         (click)="tempParamStorage(dragObject[item].x)"
                         (change)="changePosition('x',item)">
                </span>
                <span>
                  <label>Y</label>
                  <input type="text" [(ngModel)]="dragObject[item].y"
                         (select)="tempParamStorage(dragObject[item].y)"
                         (click)="tempParamStorage(dragObject[item].y)"
                         (change)="changePosition('y',item)">
                </span>
                <span>
                  <label>Z</label>
                  <input type="text" [(ngModel)]="dragObject[item].z">
                </span>
                <span class="clearAll clearOne ml-3" (click)="removeObj(item)">
                  <span class="material-icons">clear</span>
                </span>
              </li>
            </ol>
          </mat-expansion-panel>

          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title [class]="subitemClass['ue']">
                {{ 'planning.ue.info' | translate }}
                <label class="matBadge">{{ ueList.length }}</label>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div *ngIf="ueList.length == 0" style="width: 100%; text-align: center">
              {{ 'planning.no.ue' | translate }}
            </div>
            <span *ngIf="ueList.length > 0" class="clearAll" (click)="clearAll('UE')">
              <span class="material-icons">clear</span>Clear All
            </span>
            <ul>
              <li>
                <ol>
                  <li *ngFor="let item of ueList; let i = index;">
                    <span>
                      <label>X</label>
                      <input type="text" [(ngModel)]="dragObject[item].x"
                             (select)="tempParamStorage(dragObject[item].x)"
                             (click)="tempParamStorage(dragObject[item].x)"
                             (change)="changePosition('x',item)">
                    </span>
                    <span>
                      <label>Y</label>
                      <input type="text" [(ngModel)]="dragObject[item].y"
                             (select)="tempParamStorage(dragObject[item].y)"
                             (click)="tempParamStorage(dragObject[item].y)"
                             (change)="changePosition('y',item)">
                    </span>
                    <span>
                      <label>Z</label>
                      <select class="zAxis" [(ngModel)]="dragObject[item].z">
                        <option *ngFor="let z of zValues" [value]="z">{{ z }}</option>
                      </select>
                    </span>
                    <span class="clearAll clearOne ml-3" (click)="removeObj(item)">
                      <span class="material-icons">clear</span>
                    </span>
                    <br>
                    <button class="rfBtns" mat-stroked-button color="primary" (click)="openUEParamSetting(item, i, true)">{{ 'ueParamLink' | translate }}</button>
                  </li>
                </ol>
              </li>
            </ul>
          </mat-expansion-panel>

          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>{{ 'planning.model' | translate }}</mat-panel-title>
            </mat-expansion-panel-header>
            <ul>
              <li>
                <p>
                  <label>{{ 'pathLossModelId' | translate }}</label>
                  <span>
                    <select style="min-width: 16em;" (change)="pathLossCustomizeDialog($event.target.value)" [(ngModel)]="calculateForm.pathLossModelId">
                      <ng-container *ngIf="calculateForm.objectiveIndex == '2'; else pathLossModelIdTemp">
                        <option value="9">{{ 'planning.algorithm.model' | translate }}</option>
                      </ng-container>
                      <ng-template #pathLossModelIdTemp>
                        <option value={{item.id}} *ngFor="let item of modelList;">
                          <ng-container *ngIf="item.property == 'default'">
                            <ng-container *ngIf="checkIfChinese() == true">{{ item.chineseName }}</ng-container>
                            <ng-container *ngIf="checkIfChinese() == false">{{ item.name }}</ng-container>
                          </ng-container>
                          <ng-container *ngIf="item.property == 'customized' ">
                            <ng-container *ngIf="checkIfChinese() == true">{{ 'customize' | translate }}_{{ item.chineseName }}</ng-container>
                            <ng-container *ngIf="checkIfChinese() == false">{{ 'customize' | translate }}_{{ item.name }}</ng-container>
                          </ng-container>
                        </option>
                        <!-- <option value="0">{{ 'planning.itri.51' | translate }}</option>
                        <option value="1">{{ 'planning.taichung' | translate }}</option>
                        <option value="2">ITU office 900MHz</option>
                        <option value="3">ITU office 1.2~1.3GHz</option>
                        <option value="4">ITU office 1.8~2, 2.4GHz</option>
                        <option value="5">ITU office 3.5GHz</option>
                        <option value="12">{{ 'planning.4.7G.Office' | translate }}</option>
                        <option value="11">ITU office 5.2GHz</option>
                        <option value="7">ITU commercial 900MHz</option>
                        <option value="8">ITU commercial 1.2~1.3, 1.8~2.4GHz</option>
                        <option value="6">ITU residential 1.8~2, 2.4GHz</option>
                        <option value="9">{{ 'planning.algorithm.model' | translate }}</option>
                        <option value="10">{{ 'planning.algorithm.model.pegatron' | translate }}</option> -->
                        <option value="999">【{{ 'planning.user_define' | translate }}】</option>
                      </ng-template>
                    </select>
                  </span>
                </p>
              </li>
              <!-- <li>
                <label>自訂無線模型(@jane要再給)</label>
                <span class="block spCell">
                  a<input type="text" [(ngModel)]="calculateForm.modelname">
                  b<input type="text" [(ngModel)]="calculateForm.distanceFactor">
                  c<input type="text" [(ngModel)]="calculateForm.contantFactor">
                </span>
              </li> -->

            </ul>
          </mat-expansion-panel>
        </div>
      </mat-expansion-panel>

      <div class="antennablock">
        <span style="text-decoration:underline; cursor:pointer" (click)="openAntennaSetting()">
          {{ 'antenna.setting' | translate }}
        </span>
      </div>


      <mat-expansion-panel *ngIf="0">
        <mat-expansion-panel-header>
          <mat-panel-title>{{ 'planning.algorithm' | translate }}</mat-panel-title>
        </mat-expansion-panel-header>
        <div class="panel_content algorithm">
          <ul>
            <li>
              <span>{{ 'mctsC' | translate }}</span>
              <input type="text" [(ngModel)]="calculateForm.mctsC">
            </li>
            <li>
              <span>{{ 'mctsMimo' | translate }}</span>
              <input type="text" [(ngModel)]="calculateForm.mctsMimo">
            </li>
            <li>
              <span>{{ 'mctsTemperature' | translate }}</span>
              <input type="text" [(ngModel)]="calculateForm.mctsTemperature">
            </li>
            <li>
              <span>{{ 'mctsTime' | translate }}</span>
              <input type="text" [(ngModel)]="calculateForm.mctsTime">
            </li>
            <li>
              <span>{{ 'mctsTestTime' | translate }}</span>
              <input type="text" [(ngModel)]="calculateForm.mctsTestTime">
            </li>
            <li>
              <span>{{ 'mctsTotalTime' | translate }}</span>
              <input type="text" [(ngModel)]="calculateForm.mctsTotalTime">
            </li>
          </ul>
        </div>
      </mat-expansion-panel>

    </mat-accordion>
  </mat-sidenav>
</mat-sidenav-container>

<ng-template #materialModal>
  <h5 *ngIf="dragObject[svgId].type === 'obstacle' ; else otherTypeTemp" mat-dialog-title>{{ 'altitude.setting' | translate }} / {{ 'material.setting' | translate }} </h5>
  <ng-template #otherTypeTemp>
    <h5 mat-dialog-title>{{ 'altitude.setting' | translate }}</h5>
  </ng-template>
  <div mat-dialog-content>
    <ul>
      <li class="highset">
        {{ 'altitude.setting' | translate }}
        <ng-container *ngIf="dragObject[svgId].type === 'obstacle'">
          <input type="text" [(ngModel)]="dragObject[svgId].altitude">{{ 'meter' | translate }}
        </ng-container>
        <ng-container *ngIf="dragObject[svgId].type === 'defaultBS' || dragObject[svgId].type === 'candidate'">
          <input type="text" [(ngModel)]="dragObject[svgId].altitude">{{ 'cm' | translate }}
        </ng-container>
        <ng-container *ngIf="dragObject[svgId].type === 'UE'">
          <select class="zAxis" [(ngModel)]="dragObject[svgId].z">
            <option *ngFor="let z of zValues" [value]="z">{{ z }}</option>
          </select>
        </ng-container>
      </li>
      <li class="mt-2" *ngIf="dragObject[svgId].type === 'obstacle'">
        <mat-label>{{ 'material.setting' | translate }}</mat-label>
        <mat-radio-group [(ngModel)]="dragObject[svgId].material" aria-label="Select an option">
          <mat-radio-button value="0">{{ 'material.wood' | translate }}</mat-radio-button>
          <mat-radio-button class="ml-2" value="1">{{ 'material.cement' | translate }}</mat-radio-button>
          <mat-radio-button class="ml-2" value="2">{{ 'material.light_steel_frame' | translate }}</mat-radio-button>
          <mat-radio-button class="ml-2" value="3">{{ 'material.glass' | translate }}</mat-radio-button>
          <mat-radio-button class="ml-2" value="4">{{ 'material.stainless' | translate }}</mat-radio-button>
          <mat-radio-button class="ml-2" value="5">{{ 'material.fireproof' | translate }}</mat-radio-button>
          <mat-radio-button class="ml-2" value="6">{{ 'material.fireSoundproof' | translate }}</mat-radio-button>
          <mat-radio-button class="ml-2" value="7">{{ 'material.whiteBrick' | translate }}</mat-radio-button>
          <mat-radio-button class="ml-2" value="8">{{ 'material.flameproof' | translate }}</mat-radio-button>
          <mat-radio-button class="ml-2" value="9">{{ 'material.flameSoundproof' | translate }}</mat-radio-button>
          <mat-radio-button class="ml-2" value="10">{{ 'material.cabinet' | translate }}</mat-radio-button>

        </mat-radio-group>
      </li>
    </ul>
  </div>
</ng-template>
<ng-template #materialModal2>
  <h5 *ngIf="dragObject[svgId].type === 'obstacle' ; else otherTypeTemp" mat-dialog-title>{{ 'altitude.setting' | translate }} / {{ 'material.setting' | translate }} </h5>
  <ng-template #otherTypeTemp>
    <h5 *ngIf="dragObject[svgId].type === 'obstacle' || dragObject[svgId].type === 'UE'" mat-dialog-title>{{ 'altitude.setting' | translate }}</h5>
    <h5 *ngIf="dragObject[svgId].type === 'defaultBS' || dragObject[svgId].type === 'candidate'" mat-dialog-title>BS {{svgNum}}{{'for' | translate}} {{ 'altitude.setting' | translate }}</h5>
  </ng-template>
  <table class="altParamTable">
    <tbody>
      <ng-container *ngIf="dragObject[svgId].type != 'obstacle'">
        <tr>
          <td>{{ 'altitude.setting' | translate }}</td>
          <td>
            <ng-container *ngIf="dragObject[svgId].type === 'defaultBS' || dragObject[svgId].type === 'candidate'">
              <input type="number" step="0.1" max="calculateForm.altitude" min="0" [(ngModel)]="dragObject[svgId].altitude"
                     (change)="checkHeiWidAlt(svgId,dragObject[svgId].altitude,null)">
              {{ 'meter' | translate }}
            </ng-container>
            <ng-container *ngIf="dragObject[svgId].type === 'UE'">
              <select class="zAxis" [(ngModel)]="dragObject[svgId].z">
                <option *ngFor="let z of zValues" [value]="z">{{ z }}</option>
              </select>
            </ng-container>
          </td>
        </tr>
      </ng-container>
      <ng-container *ngIf="dragObject[svgId].type === 'obstacle'">
        <tr>
          <td>{{ 'altitude.start' | translate }}</td>
          <td>
            <input type="number" step="0.1" max="calculateForm.altitude" min="0"
                   [(ngModel)]="dragObject[svgId].z"
                   (select)="tempParamStorage(dragObject[svgId].z)"
                   (click)="tempParamStorage(dragObject[svgId].z)"
                   (change)="changeZvalue(svgId)">
            {{ 'meter' | translate }}
          </td>
        </tr>
        <tr>
          <td>{{ 'altitude.obstacle' | translate }}</td>
          <td>
            <input type="number" step="0.1" max="calculateForm.altitude" min="0"
                   [(ngModel)]="dragObject[svgId].altitude"
                   (select)="tempParamStorage(dragObject[svgId].altitude)"
                   (click)="tempParamStorage(dragObject[svgId].altitude)"
                   (change)="changeSize(svgId, 'altitude',true)">
            {{ 'meter' | translate }}
          </td>
        </tr>
      </ng-container>

      <tr *ngIf="dragObject[svgId].type === 'obstacle'">
        <td>{{ 'material.setting' | translate }}</td>
        <td>
          <!-- 右鍵高度/材質設定 -->
          <select [(ngModel)]="dragObject[svgId].material" (change)="setMaterialName(svgId,dragObject[svgId].material)">
            <ng-container *ngFor="let item of materialList;">
              <!-- <option value={{item.id}} *ngFor="let item of materialList"> -->
              <option *ngIf="deleteMaterialList.includes(item.id) == false" value={{item.id}}>
                <ng-container *ngIf="item.property == 'default'">
                  <ng-container *ngIf="checkIfChinese() == true">{{ item.chineseName }}</ng-container>
                  <ng-container *ngIf="checkIfChinese() == false">{{ item.name }}</ng-container>
                </ng-container>
                <ng-container *ngIf="item.property == 'customized' ">
                  <ng-container *ngIf="checkIfChinese() == true">{{ 'customize' | translate }}_{{ item.chineseName }}</ng-container>
                  <ng-container *ngIf="checkIfChinese() == false">{{ 'customize' | translate }}_{{ item.name }}</ng-container>
                </ng-container>
              </option>
            </ng-container>
            <!-- <option value="0">{{ 'material.wood' | translate }}</option>
            <option value="1">{{ 'material.cement' | translate }}</option>
            <option value="2">{{ 'material.light_steel_frame' | translate }}</option>
            <option value="3">{{ 'material.glass' | translate }}</option>
            <option value="4">{{ 'material.stainless' | translate }}</option>
            <option value="5">{{ 'material.fireproof' | translate }}</option>
            <option value="6">{{ 'material.fireSoundproof' | translate }}</option>
            <option value="7">{{ 'material.whiteBrick' | translate }}</option>
            <option value="8">{{ 'material.flameproof' | translate }}</option>
            <option value="9">{{ 'material.flameSoundproof' | translate }}</option>
            <option value="10">{{ 'material.cabinet' | translate }}</option> -->
          </select>
        </td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #materialCustomizeModal>
  <h5 *ngIf="materialId == 999 ; else editMaterialTemp">{{ 'material.customize' | translate }} </h5>
  <ng-template #editMaterialTemp>
    <h5>{{ 'material.edit' | translate }}</h5>
  </ng-template>
  <table class="altParamTable">
    <tbody>
      <tr>
        <td>{{ 'material.name' | translate }}</td>
        <td>
          <ng-container *ngIf="materialProperty == 'default'">
            <span>{{materialName}}</span>
          </ng-container>
          <ng-container *ngIf="materialProperty == 'customized'">
            <input type="text" [(ngModel)]="materialName">
          </ng-container>
        </td>
      </tr>
      <tr>
      <tr>
        <td>{{ 'material.loss.coefficient' | translate }}</td>
        <td>
          <input type="number" step="0.1" min="-1000" [(ngModel)]="materialLossCoefficient">
        </td>
      </tr>
    </tbody>
  </table>

  <div class="modalFooter" style="padding-top:0.8em;">
    <!-- 0.8em -->
    <ng-container *ngIf="materialId == 999">
      <a href="javascript:void(0)" (click)="createNewMaterial()">{{ 'planning.submit' | translate }}</a>
    </ng-container>
    <ng-container *ngIf="materialId != 999">
      <a href="javascript:void(0)" (click)="materialCustomize()">{{ 'planning.submit' | translate }}</a>
    </ng-container>
    <ng-container *ngIf="materialId != 999 && materialProperty == 'customized'">
      <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      <a href="javascript:void(0)" (click)="deleteMaterialDialog()">{{ 'planning.delete.material' | translate }}</a>
    </ng-container>
  </div>
</ng-template>

<ng-template #confirmDeleteMaterial>
  <h5 mat-dialog-title>{{ 'changeToSimulationTitle' | translate }}</h5>
  <div mat-dialog-content>
    <p>{{ 'confirmDeleteMaterial' | translate }}</p>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="deleteMaterial(false)">{{ 'deleteCancel' | translate }}</button>
    <button mat-button (click)="deleteMaterial(true)" cdkFocusInitial>{{ 'deleteSure' | translate }}</button>
  </div>
</ng-template>

<ng-template #confirmDeleteModel>
  <h5 mat-dialog-title>{{ 'changeToSimulationTitle' | translate }}</h5>
  <div mat-dialog-content>
    <p>{{ 'confirmDeleteModel' | translate }}</p>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="deleteModel(false)">{{ 'deleteCancel' | translate }}</button>
    <button mat-button (click)="deleteModel(true)" cdkFocusInitial>{{ 'deleteSure' | translate }}</button>
  </div>
</ng-template>

<ng-template #createModelSuccessModal>
  <h5 mat-dialog-title>{{ 'changeToSimulationTitle' | translate }}</h5>
  <div mat-dialog-content>
    <p>{{ 'createModelSuccess' | translate }}</p>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="selectAndClose();cleanData()" cdkFocusInitial>{{ 'deleteSure' | translate }}</button>
  </div>
</ng-template>

<ng-template #createMaterialSuccessModal>
  <h5 mat-dialog-title>{{ 'changeToSimulationTitle' | translate }}</h5>
  <div mat-dialog-content>
    <p>{{ 'createMaterialSuccess' | translate }}</p>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="selectAndClose()" cdkFocusInitial>{{ 'deleteSure' | translate }}</button>
  </div>
</ng-template>

<ng-template #calculateModelSuccessModal>
  <h5 mat-dialog-title>{{ 'changeToSimulationTitle' | translate }}</h5>
  <div mat-dialog-content>
    <p>{{ 'createModelSuccess' | translate }}{{ 'modelCalculateResult' | translate }}</p>
    <div style="text-align:center; margin-bottom:1em;; font-size:110%">
      <span style="font-style: italic;">L<sub>total</sub> =</span>
      <!-- <span>20 * log<sub>10</sub>f + N * log<sub>10</sub>(d) + L<sub>f</sub>(n) - 28</span> -->
      <span>20 log<sub>10</sub>&#402;</span>
      <span *ngIf="modelDissCoefficient >= 0"> + {{calModelDissCoefficient}}</span>
      <span *ngIf="modelDissCoefficient < 0"> + ({{calModelDissCoefficient}})</span>
      <span *ngIf="modelDissCoefficient == null && createMethod == 'importFile' && calculateForm.pathLossModelId == 999" style="font-style: italic;">N</span>
      <span> log<sub>10</sub></span>
      <span style="font-style: italic;"> d</span>
      <span *ngIf="modelfieldLoss >= 0"> + {{calModelfieldLoss}}</span>
      <span *ngIf="modelfieldLoss < 0"> + ({{calModelfieldLoss}})</span>
      <!-- <span style="font-style: italic;">L<sub>&#402;</sub></span> -->
      <span *ngIf="modelfieldLoss == null && createMethod == 'importFile' && calculateForm.pathLossModelId == 999" style="font-style: italic;">L<sub>&#402;</sub></span>
      <span> - 28</span>
    </div>
    <div style="text-align:right; margin-bottom:1em; font-size:70%">
      <span style="text-align:right;">&#402;: {{ 'planning.model.frequency' | translate }} (MHz), </span>
      <br>
      <span style="font-style: italic;">d</span>
      <span>: {{ 'planning.model.distenceBsUe' | translate }} ({{ 'meter' | translate }})</span>
      <br>
      <span>{{ 'note' | translate }}: {{ 'assume' | translate }}{{ 'planning.model.freeSpaceProp' | translate }} = </span>
      <span>20 log<sub>10</sub>&#402; -28 </span>
    </div>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="selectAndClose();cleanData()" cdkFocusInitial>{{ 'deleteSure' | translate }}</button>
  </div>
</ng-template>

<ng-template #coordinateInfoModal>
  <h5 mat-dialog-title>{{ 'CoordinateDescription' | translate }}</h5>
  <div mat-dialog-content>
    <img *ngIf="checkIfChinese() == true" src="assets/img/coordinate-rotation.png">
    <img *ngIf="checkIfChinese() == false" src="assets/img/coordinate-rotation-en.png">
  </div>
</ng-template>

<ng-template #modelCustomizeModal>
  <h5 *ngIf="calculateForm.pathLossModelId == 999 ; else editModelTemp">{{ 'planning.user_define' | translate }} </h5>
  <ng-template #editModelTemp>
    <h5>{{ 'planning.edit' | translate }}</h5>
  </ng-template>
  <div style="text-align:center; margin-bottom:1em;; font-size:110%">
    <span style="font-style: italic;">L<sub>total</sub> =</span>
    <!-- <span>20 * log<sub>10</sub>f + N * log<sub>10</sub>(d) + L<sub>f</sub>(n) - 28</span> -->
    <span>20 log<sub>10</sub>&#402;</span>
    <span *ngIf="modelDissCoefficient >= 0"> + {{modelDissCoefficient}}</span>
    <span *ngIf="modelDissCoefficient < 0"> + ({{modelDissCoefficient}})</span>
    <span *ngIf="modelDissCoefficient == null && createMethod == 'importFile' && calculateForm.pathLossModelId == 999" style="font-style: italic;">N</span>
    <span> log<sub>10</sub></span>
    <span style="font-style: italic;"> d</span>
    <span *ngIf="modelfieldLoss >= 0"> + {{modelfieldLoss}}</span>
    <span *ngIf="modelfieldLoss < 0"> + ({{modelfieldLoss}})</span>
    <!-- <span style="font-style: italic;">L<sub>&#402;</sub></span> -->
    <span *ngIf="modelfieldLoss == null && createMethod == 'importFile' && calculateForm.pathLossModelId == 999" style="font-style: italic;">L<sub>&#402;</sub></span>
    <span> - 28</span>
  </div>
  <div style="text-align:right; margin-bottom:1em; font-size:70%">
    <span style="text-align:right;">&#402;: {{ 'planning.model.frequency' | translate }} (MHz), </span>
    <br>
    <span style="font-style: italic;">d</span>
    <span>: {{ 'planning.model.distenceBsUe' | translate }} ({{ 'meter' | translate }})</span>
    <br>
    <span>{{ 'note' | translate }}: {{ 'assume' | translate }}{{ 'planning.model.freeSpaceProp' | translate }} = </span>
    <span>20 log<sub>10</sub>&#402; -28 </span>
  </div>
  <table class="altParamTable">
    <tbody>
      <tr *ngIf="calculateForm.pathLossModelId == 999">
        <td>{{ 'createMethod' | translate }}</td>
        <td>
          <mat-radio-group style="display: flex; margin-top: 0.5rem;" (change)="changeCreateMethod()" [(ngModel)]="createMethod">
            <mat-radio-button value="formula" style="margin-right: 15px;">{{ 'enterFormula' | translate }}</mat-radio-button>
            <mat-radio-button value="importFile">{{ 'importFile' | translate }}</mat-radio-button>
          </mat-radio-group>
        </td>
      </tr>
      <tr style="border-top: 1px solid #ddd;" *ngIf="calculateForm.pathLossModelId == 999 && createMethod == 'importFile'">
        <td>
          {{ 'antennaFieldData' | translate }}
          (<a href="../../assets/file/ITRI_pathlossmodel_template.xlsx">{{ 'download' | translate }}</a>)
        </td>
        <td>
          <button mat-stroked-button id="uploadBt" tabindex="-1" (click)="modelfile.click();">{{ 'file' | translate }}</button>
          <input type="file" #modelfile (change)="uploadFile($event)" style="display: none; width: 0%;" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">
          <span *ngIf="modelFileName != ''">&ensp;{{ modelFileName }}</span>
          <span *ngIf="modelFileName == ''">&ensp;{{ 'nofile' | translate }}</span>
        </td>
      </tr>
      <tr>
        <td>{{ 'planning.model.name' | translate }}</td>
        <td>
          <ng-container *ngIf="modelProperty == 'default'">
            <span>{{modelName}}</span>
          </ng-container>
          <ng-container *ngIf="modelProperty == 'customized'">
            <input type="text" [(ngModel)]="modelName">
          </ng-container>
        </td>
      </tr>
      <tr>
        <td>
          {{ 'planning.model.disscoefficient' | translate }}
          <span *ngIf="modelDissCoefficient == null && createMethod == 'importFile' && calculateForm.pathLossModelId == 999" style="font-style: italic;">N</span>
        </td>
        <td>
          <input [disabled]="createMethod == 'importFile' && calculateForm.pathLossModelId == 999" type="number" step="0.1" min="0" [(ngModel)]="modelDissCoefficient">
        </td>
      </tr>
      <tr>
        <td>
          {{ 'planning.model.fieldLoss' | translate }}
          <span *ngIf="modelfieldLoss == null && createMethod == 'importFile' && calculateForm.pathLossModelId == 999" style="font-style: italic;">L<sub>&#402;</sub></span>
        </td>
        <td>
          <input [disabled]="createMethod == 'importFile' && calculateForm.pathLossModelId == 999" type="number" step="0.1" min="0" [(ngModel)]="modelfieldLoss">
        </td>
      </tr>
    </tbody>
  </table>
  <div class="modalFooter" style="padding-top:0.8em;">

    <ng-container *ngIf="calculateForm.pathLossModelId != 999">
      <a href="javascript:void(0)" (click)="pathLossCustomize()">{{ 'planning.submit' | translate }}</a>
    </ng-container>
    <ng-container *ngIf="calculateForm.pathLossModelId == 999 && createMethod == 'formula'">
      <a href="javascript:void(0)" (click)="createNewModel()">{{ 'planning.submit' | translate }}</a>
    </ng-container>
    <ng-container *ngIf="calculateForm.pathLossModelId != 999 && modelProperty == 'customized'">
      <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      <a href="javascript:void(0)" (click)="deleteModelDialog()">{{ 'planning.delete.model' | translate }}</a>
    </ng-container>
    <ng-container *ngIf="calculateForm.pathLossModelId == 999 && createMethod == 'importFile'">
      <a href="javascript:void(0)" (click)="calculatePathlossModel()">{{ 'planning.submit' | translate }}</a>
      <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      <a href="javascript:void(0)" (click)="cleanData()">{{ 'planning.delete.data' | translate }}</a>
    </ng-container>
  </div>
</ng-template>

<ng-template #UeModalTable>
  <h5 mat-dialog-title>UE{{svgNum}}{{'for' | translate}}{{ 'ueParamLink' | translate }}</h5>
  <table class="rfParamTable">
    <tbody>
      <tr>
        <td>{{ 'RxGain' | translate }}</td>
        <td>
          <input type="number" class="inputNum" step="0.1" style="width: 175px"
                 [(ngModel)]="ueListParam[svgId].ueRxGain"
                 tabindex="-1">
        </td> dB
      </tr>
    </tbody>
  </table>
</ng-template>



<ng-template #FieldCoverageModalTable>
  <h5 mat-dialog-title>{{ 'isCoverage.paramLink' | translate }}</h5>
  <table style="margin-bottom:0px">
    <tbody>
      <tr style="border-bottom-style:none">
        <td>
          {{'CoveragePercent' | translate}}&ensp;
          {{'moreThan' | translate}}
        </td>
        <td>
          <input style="margin: 4.8px" type="text" [(ngModel)]="evaluationFuncForm.field.coverage.ratio" (change)="checkPercent(evaluationFuncForm.field.coverage.ratio)">
        </td>
      </tr>

      <tr style="border-bottom-style:none">
        <td colspan="4">
          <button value="ok" (click)="evaluationOK()" style="float:right;">{{ 'planning.ok' | translate }}</button>
          <button value="cancel" (click)="evaluationCancel()" style="float:right;margin-right:2em;">{{ 'cancel' | translate }}</button>
        </td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #SINRModalTable>
  <h5 mat-dialog-title>{{ 'isSINR.paramLink' | translate }}</h5>
  <table style="margin-bottom:0px">
    <tbody>
      <tr>
        <td>{{'AreaPercent' | translate}}</td>
        <td>{{'Condition' | translate}}</td>
        <td>{{'SINR' | translate}}</td>
        <td>
          <button value="new" (click)="addSINR()" style="float:right, bottom" [disabled]="evaluationFuncForm.field.sinr.ratio.length >= 3 || isDefaultSINRSetting == 'default'">{{ 'MutilFunctionNewCondition' | translate }}</button>
        </td>
      </tr>
      <tr *ngFor="let setting of evaluationFuncForm.field.sinr.ratio; let i=index" style="float:center" style="height: 60px;">

        <td>
          <input style="margin: 4.8px" type="text" [(ngModel)]="evaluationFuncForm.field.sinr.ratio[i].areaRatio" (change)="checkPercent(evaluationFuncForm.field.sinr.ratio[i].areaRatio)" [disabled]="isDefaultSINRSetting == 'default'">

        </td>
        <td>
          <select step="2"
                  [(ngModel)]="evaluationFuncForm.field.sinr.ratio[i].compliance" [disabled]="isDefaultSINRSetting == 'default'">
            <option value="moreThan"> {{'moreThan' | translate}} </option>
            <option value="lessThan"> {{'lessThan' | translate}} </option>
          </select>

        </td>
        <td>
          <input style="margin: 4.8px" type="text" [(ngModel)]="evaluationFuncForm.field.sinr.ratio[i].value" (change)="checkSINR(evaluationFuncForm.field.sinr.ratio[i].value)" [disabled]="isDefaultSINRSetting == 'default'">

        </td>
        <td>
          <button value="del" (click)="delSINR(i)" style="float:right, bottom" v-if="index == evaluationFuncForm.field.sinr.ratio.length-1 && evaluationFuncForm.field.sinr.ratio.length != 1" [disabled]="isDefaultSINRSetting == 'default' || evaluationFuncForm.field.sinr.ratio.length == 1">{{ 'MutilFunctionDelCondition' | translate }}</button>

        </td>
      </tr>

      <tr style="border-bottom-style:none">
        <td colspan="4">
          <button value="ok" (click)="evaluationOK()" style="float:right;">{{ 'planning.ok' | translate }}</button>
          <button value="cancel" (click)="evaluationCancel()" style="float:right;margin-right:2em;">{{ 'cancel' | translate }}</button>
        </td>
      </tr>

    </tbody>
  </table>
</ng-template>

<ng-template #RSRPModalTable>
  <h5 mat-dialog-title>{{ 'isRSRP.paramLink' | translate }}</h5>
  <table style="margin-bottom:0px">
    <tbody>
      <tr>
        <td>{{'AreaPercent' | translate}}</td>
        <td>{{'Condition' | translate}}</td>
        <td>{{'RSRP' | translate}}</td>
        <td>
          <button value="new" (click)="addRSRP()" style="float:right, bottom" [disabled]="evaluationFuncForm.field.rsrp.ratio.length >= 3 || isDefaultRSRPSetting == 'default'">{{ 'MutilFunctionNewCondition' | translate }}</button>
        </td>
      </tr>
      <tr>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.field.rsrp.ratio; let i=index" style="float:center" style="height: 60px">
            <input style="margin: 4.8px" type="text" [(ngModel)]="evaluationFuncForm.field.rsrp.ratio[i].areaRatio" (change)="checkPercent(evaluationFuncForm.field.rsrp.ratio[i].areaRatio)" [disabled]="isDefaultRSRPSetting == 'default'">
          </div>
        </td>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.field.rsrp.ratio; let i=index" style="float:center" style="height: 60px">
            <select step="2"
                    [(ngModel)]="evaluationFuncForm.field.rsrp.ratio[i].compliance" [disabled]="isDefaultRSRPSetting == 'default'">
              <option value="moreThan"> {{'moreThan' | translate}} </option>
              <option value="lessThan"> {{'lessThan' | translate}} </option>
            </select>
          </div>
        </td>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.field.rsrp.ratio; let i=index" style="float:center" style="height: 60px">
            <input style="margin: 4.8px" type="text" [(ngModel)]="evaluationFuncForm.field.rsrp.ratio[i].value" (change)="checkRSRP(evaluationFuncForm.field.rsrp.ratio[i].value)" [disabled]="isDefaultRSRPSetting == 'default'">
          </div>
        </td>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.field.rsrp.ratio; let i=index" style="float:center" style="height: 60px">
            <button value="del" (click)="delRSRP(i)" style="float:right, bottom" v-if="index == evaluationFuncForm.field.rsrp.ratio.length-1 && evaluationFuncForm.field.rsrp.ratio.length != 1" [disabled]="isDefaultRSRPSetting == 'default' || evaluationFuncForm.field.rsrp.ratio.length == 1">{{ 'MutilFunctionDelCondition' | translate }}</button>
          </div>
        </td>
      </tr>

      <tr style="border-bottom-style:none">
        <td colspan="4">
          <button value="ok" (click)="evaluationOK()" style="float:right;">{{ 'planning.ok' | translate }}</button>
          <button value="cancel" (click)="evaluationCancel()" style="float:right;margin-right:2em;">{{ 'cancel' | translate }}</button>
        </td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #ThroughputModalTable>
  <h5 mat-dialog-title>{{ 'isThroughput.paramLink' | translate }}</h5>
  <table style="margin-bottom:0px">
    <tbody>
      <tr>
        <td>{{'AreaPercent' | translate}}</td>
        <td>{{'UL/DL' | translate}}</td>
        <td>{{'Condition' | translate}}</td>
        <td>{{'Throughput' | translate}}</td>
        <td>
          <button value="new" (click)="addThroughput()" style="float:right, bottom"
                  [disabled]="evaluationFuncForm.field.throughput.ratio.length >= 6 || isDefaultThroughputSetting == 'default'">
            {{ 'MutilFunctionNewCondition' | translate }}
          </button>
        </td>
      </tr>
      <tr>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.field.throughput.ratio; let i=index" style="float:center" style="height: 60px">
            <input style="margin: 4.8px" type="text" [(ngModel)]="evaluationFuncForm.field.throughput.ratio[i].areaRatio" (change)="checkPercent(evaluationFuncForm.field.throughput.ratio[i].areaRatio)" [disabled]="isDefaultThroughputSetting == 'default'">
          </div>
        </td>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.field.throughput.ratio; let i=index" style="float:center" style="height: 60px">
            <select step="2"
                    [(ngModel)]="fieldThroughputTypeArr[i]" [disabled]="isDefaultThroughputSetting == 'default'"
                    (change)="changeFieldULDL(i, fieldThroughputValueArr[i])">
              <option value="UL"> {{'UL' | translate}} </option>
              <option value="DL"> {{'DL' | translate}} </option>
            </select>
          </div>
        </td>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.field.throughput.ratio; let i=index" style="float:center" style="height: 60px">
            <select step="2"
                    [(ngModel)]="evaluationFuncForm.field.throughput.ratio[i].compliance" [disabled]="isDefaultThroughputSetting == 'default'">
              <option value="moreThan"> {{'moreThan' | translate}} </option>
              <option value="lessThan"> {{'lessThan' | translate}} </option>
            </select>
          </div>
        </td>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.field.throughput.ratio; let i=index" style="float:center" style="height: 60px">
            <input style="margin: 4.8px" type="text" [(ngModel)]="fieldThroughputValueArr[i]" (change)="checkThroughput(fieldThroughputValueArr[i], fieldThroughputTypeArr[i], i)"
                   [disabled]="isDefaultThroughputSetting == 'default'">
          </div>
        </td>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.field.throughput.ratio; let i=index" style="float:center" style="height: 60px">
            <button value="del" (click)="delThroughput(i)" style="float:right, bottom" v-if="index == evaluationFuncForm.field.throughput.ratio.length-1 && evaluationFuncForm.field.throughput.ratio.length != 1" [disabled]="isDefaultThroughputSetting == 'default' || evaluationFuncForm.field.throughput.ratio.length == 1">{{ 'MutilFunctionDelCondition' | translate }}</button>
          </div>
        </td>
      </tr>

      <tr style="border-bottom-style:none">
        <td colspan="5">
          <button value="ok" (click)="evaluationOK()" style="float:right;">{{ 'planning.ok' | translate }}</button>
          <button value="cancel" (click)="evaluationCancel()" style="float:right;margin-right:2em;">{{ 'cancel' | translate }}</button>
        </td>

      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #UEThroughputModalTable>
  <h5 mat-dialog-title>{{ 'isUeAvgThroughput.paramLink' | translate }}</h5>

  <table style="margin-bottom:0px">
    <tbody>
      <tr>
        <td>{{'CountPercent' | translate}}</td>
        <td>{{'UL/DL' | translate}}</td>
        <td>{{'Condition' | translate}}</td>
        <td>{{'Throughput' | translate}}</td>
        <td>
          <button value="new" (click)="addUEThroughput()" style="float:right, bottom" [disabled]="evaluationFuncForm.ue.throughputByRsrp.ratio.length >= 6 || isDefaultUEThroughputSetting == 'default'">{{ 'MutilFunctionNewCondition' | translate }}</button>
        </td>
      </tr>
      <tr>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.ue.throughputByRsrp.ratio; let i=index" style="float:center" style="height: 60px">
            <input style="margin: 4.8px" type="text" [(ngModel)]="evaluationFuncForm.ue.throughputByRsrp.ratio[i].countRatio" (change)="checkPercent(evaluationFuncForm.ue.throughputByRsrp.ratio[i].countRatio)" [disabled]="isDefaultUEThroughputSetting == 'default'">
          </div>
        </td>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.ue.throughputByRsrp.ratio; let i=index" style="float:center" style="height: 60px">
            <select step="2"
                    [(ngModel)]="ueThroughputTypeArr[i]"
                    [disabled]="isDefaultUEThroughputSetting == 'default'"
                    (change)="changeUEULDL(i, ueThroughputValueArr[i])">
              <option value="UL"> {{'UL' | translate}} </option>
              <option value="DL"> {{'DL' | translate}} </option>
            </select>
          </div>
        </td>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.ue.throughputByRsrp.ratio; let i=index" style="float:center" style="height: 60px">
            <select step="2"
                    [(ngModel)]="evaluationFuncForm.ue.throughputByRsrp.ratio[i].compliance" [disabled]="isDefaultUEThroughputSetting == 'default'">
              <option value="moreThan"> {{'moreThan' | translate}} </option>
              <option value="lessThan"> {{'lessThan' | translate}} </option>
            </select>
          </div>
        </td>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.ue.throughputByRsrp.ratio; let i=index" style="float:center" style="height: 60px">
            <input type="text" [(ngModel)]="ueThroughputValueArr[i]" (change)="checkUEThroughput(ueThroughputValueArr[i], ueThroughputTypeArr[i], i)" [disabled]="isDefaultUEThroughputSetting == 'default'">
          </div>
        </td>
        <td>
          <div *ngFor="let setting of evaluationFuncForm.ue.throughputByRsrp.ratio; let i=index" style="float:center" style="height: 60px">
            <button value="del" (click)="delUEThroughput(i)" style="float:right, bottom" v-if="index == evaluationFuncForm.ue.throughputByRsrp.ratio.length-1 && evaluationFuncForm.ue.throughputByRsrp.ratio.length != 1" [disabled]="isDefaultUEThroughputSetting == 'default' || evaluationFuncForm.ue.throughputByRsrp.ratio.length == 1">{{ 'MutilFunctionDelCondition' | translate }}</button>
          </div>
        </td>
      </tr>

      <tr style="border-bottom-style:none">
        <td colspan="5">
          <button value="ok" (click)="evaluationOK()" style="float:right;">{{ 'planning.ok' | translate }}</button>
          <button value="cancel" (click)="evaluationCancel()" style="float:right;margin-right:2em;">{{ 'cancel' | translate }}</button>
        </td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #UECoverageModalTable>
  <h5 mat-dialog-title>{{ 'isUeCoverage.paramLink' | translate }}</h5>
  <table style="margin-bottom:0px">
    <tbody>
      <tr style="border-bottom-style:none">
        <td>
          {{'CoveragePercent' | translate}}&ensp;
          {{'moreThan' | translate}}
        </td>
        <td>
          <input type="text" [(ngModel)]="evaluationFuncForm.ue.coverage.ratio" (change)="checkPercent(evaluationFuncForm.ue.coverage.ratio)">
        </td>
      </tr>

      <tr style="border-bottom-style:none">
        <td colspan="4">
          <button value="ok" (click)="evaluationOK()" style="float:right;">{{ 'planning.ok' | translate }}</button>
          <button value="cancel" (click)="evaluationCancel()" style="float:right;margin-right:2em;">{{ 'cancel' | translate }}</button>
        </td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #AntennaWarnMsgModalTable>
  <h4 mat-dialog-title class="generalModal">
    <i class="material-icons warning">&#xe002;</i><br />
    <span *ngIf="antennaWarnMsg.name != ''">{{antennaWarnMsg.name}}<br /></span>
    <span *ngIf="antennaWarnMsg.band != ''">{{antennaWarnMsg.band}}<br /></span>
    <span *ngIf="antennaWarnMsg.port != ''">{{antennaWarnMsg.port}}<br /></span>
    <span *ngIf="antennaWarnMsg.manufactor != ''">{{antennaWarnMsg.manufactor}}<br /></span>
    <span *ngIf="antennaWarnMsg.model != ''">{{antennaWarnMsg.model}}<br /></span>
    <span *ngIf="antennaWarnMsg.file != ''">{{antennaWarnMsg.file}}<br /></span>    
  </h4>
  <div mat-dialog-actions>
    <button type="button" class="btn btn-default" mat-dialog-close style="float: left" (click)="thirdLayerDialogRef.close();">Close</button>
  </div>
</ng-template>

<ng-template #AntennaModalTable>
  <h5 mat-dialog-title>
    {{ 'antenna.setting' | translate }}

    <i class="fa fa-times closeIcon" (click)="closeFirstLayer()"></i>
  </h5>

  <table>
    <tbody>
      <tr style="border-bottom-style:none">
        <td style="vertical-align: middle">
          <mat-radio-group style="display: flex; margin-top: 0.5rem;" [(ngModel)]="isAntennaDefault" >
            <mat-radio-button value="default" style="margin-right: 15px;">{{ 'default.antenna' | translate }}</mat-radio-button>
            <mat-radio-button value="customized" style="margin-right: 15px;">{{ 'custom.antenna' | translate }}</mat-radio-button>
          </mat-radio-group>
        </td>
        <td style="vertical-align: middle" *ngIf="isAntennaDefault == 'customized'">
          <button value="new" (click)="openAddAntennaSetting()" style="float:right">{{ 'antenna.add' | translate }}</button>
        </td>
      </tr>
    </tbody>

  </table>

  <table style="margin-top:10px">
    <thead style="background-color:rgb(208,234,245);">
      <tr>
        <!--<td>{{'antenna.id' | translate}}</td>-->
        <td>{{'antenna.name' | translate}}</td>
        <td>{{'antenna.type' | translate}}</td>
        <td>{{'antenna.band' | translate}}</td>
        <td>{{'antenna.port' | translate}}</td>
        <td>{{'antenna.model' | translate}}</td>
        <td>{{'manufactor' | translate}}</td>
        <td>{{'antenna.rawdata' | translate}}</td>
        <td colspan="2" *ngIf="isAntennaDefault == 'customized'">{{'antenna.edit.del.action' | translate}}</td>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="defaultAntennaList.length == 0 && isAntennaDefault == 'default'">
        <td colspan="7" style="text-align: center">
          <font>
            {{'antenna.no.data' | translate}}
          </font>
        </td>
      </tr>
      <tr *ngIf="customizedAntennaList.length == 0 && isAntennaDefault == 'customized'">
        <td colspan="9" style="text-align: center">
          <font>
            {{'antenna.no.data' | translate}}
          </font>
        </td>
      </tr>
      <ng-container *ngIf="isAntennaDefault == 'default'">
        <tr *ngFor="let ant of defaultAntennaList let a = index ">
          <td *ngIf="a < maxAntRowInPage * defaultAntennaPage && a >= maxAntRowInPage * (defaultAntennaPage - 1)">
            {{ ant.name }}
          </td>
          <td *ngIf="a < maxAntRowInPage * defaultAntennaPage && a >= maxAntRowInPage * (defaultAntennaPage - 1)">
            <font>
              {{ ant.type | translate }}
            </font>
          </td>
          <td *ngIf="a < maxAntRowInPage * defaultAntennaPage && a >= maxAntRowInPage * (defaultAntennaPage - 1)">
            {{ ant.band[0] }} ~ {{ ant.band[1] }}
          </td>
          <td *ngIf="a < maxAntRowInPage * defaultAntennaPage && a >= maxAntRowInPage * (defaultAntennaPage - 1)">
            {{ ant.port }}
          </td>
          <td *ngIf="a < maxAntRowInPage * defaultAntennaPage && a >= maxAntRowInPage * (defaultAntennaPage - 1)">
            {{ ant.model }}
          </td>
          <td *ngIf="a < maxAntRowInPage * defaultAntennaPage && a >= maxAntRowInPage * (defaultAntennaPage - 1)">
            {{ ant.manufactor }}
          </td>
          <td *ngIf="a < maxAntRowInPage * defaultAntennaPage && a >= maxAntRowInPage * (defaultAntennaPage - 1)">
            <button value="look" (click)="openAntennaRawdata(a, isAntennaDefault)">
              {{ 'antenna.raw.data.look' | translate }}
            </button>
          </td>
        </tr>
        </ng-container>
        <ng-container *ngIf="isAntennaDefault == 'customized'">
          <tr *ngFor="let ant of customizedAntennaList let a = index ">
            
            <td *ngIf="a < maxAntRowInPage * customizedAntennaPage && a >= maxAntRowInPage * (customizedAntennaPage - 1)">
              {{ ant.name }}
            </td>
            <td *ngIf="a < maxAntRowInPage * customizedAntennaPage && a >= maxAntRowInPage * (customizedAntennaPage - 1)">
              <font>
                {{ ant.type | translate }}
              </font>
            </td>
            <td *ngIf="a < maxAntRowInPage * customizedAntennaPage && a >= maxAntRowInPage * (customizedAntennaPage - 1)">
              {{ ant.band[0] }} ~ {{ ant.band[1] }}
            </td>
            <td *ngIf="a < maxAntRowInPage * customizedAntennaPage && a >= maxAntRowInPage * (customizedAntennaPage - 1)">
              {{ ant.port }}
            </td>
            <td *ngIf="a < maxAntRowInPage * customizedAntennaPage && a >= maxAntRowInPage * (customizedAntennaPage - 1)">
              {{ ant.model }}
            </td>
            <td *ngIf="a < maxAntRowInPage * customizedAntennaPage && a >= maxAntRowInPage * (customizedAntennaPage - 1)">
              {{ ant.manufactor }}
            </td>
            <td *ngIf="a < maxAntRowInPage * customizedAntennaPage && a >= maxAntRowInPage * (customizedAntennaPage - 1)">
              <button value="look" (click)="openAntennaRawdata(a, isAntennaDefault)">
                {{ 'antenna.raw.data.look' | translate }}
              </button>
            </td>
            <td colspan="2" *ngIf="a < maxAntRowInPage * customizedAntennaPage && a >= maxAntRowInPage * (customizedAntennaPage - 1)">
              <button value="edit" (click)="openEditAntennaSetting(a)">
                {{ 'antenna.edit' | translate }}
              </button>
              <button value="del" (click)="delAntenna(a)" style="margin-left: 2em">
                {{ 'antenna.del' | translate }}
              </button>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>

    <div style="text-align:center;">
      {{"<"}}
      <ng-container *ngIf="isAntennaDefault == 'default'">
        <span *ngFor="let ant of defaultAntennaList let a = index">
          <font (click)="changeAntPage((a / maxAntRowInPage + 1), isAntennaDefault)" style="margin: 0.5em; text-decoration:underline; cursor:pointer; font-weight:bold" color="blue" *ngIf="a % maxAntRowInPage == 0 && (a / maxAntRowInPage + 1) == defaultAntennaPage">{{ (a / maxAntRowInPage + 1) }}</font>
          <font (click)="changeAntPage((a / maxAntRowInPage + 1), isAntennaDefault)" style="margin: 0.5em; text-decoration:underline; cursor:pointer" color="black" *ngIf="a % maxAntRowInPage == 0 && (a / maxAntRowInPage + 1) != defaultAntennaPage">{{ (a / maxAntRowInPage + 1) }}</font>
        </span>
      </ng-container>
      <ng-container *ngIf="isAntennaDefault == 'customized'">
        <span *ngFor="let ant of customizedAntennaList let a = index">
          <font (click)="changeAntPage((a / maxAntRowInPage + 1), isAntennaDefault)" style="margin: 0.5em; text-decoration:underline; cursor:pointer; font-weight:bold" color="blue" *ngIf="a % maxAntRowInPage == 0 && (a / maxAntRowInPage + 1) == customizedAntennaPage">{{ (a / maxAntRowInPage + 1) }}</font>
          <font (click)="changeAntPage((a / maxAntRowInPage + 1), isAntennaDefault)" style="margin: 0.5em; text-decoration:underline; cursor:pointer" color="black" *ngIf="a % maxAntRowInPage == 0 && (a / maxAntRowInPage + 1) != customizedAntennaPage">{{ (a / maxAntRowInPage + 1) }}</font>
        </span>
      </ng-container>
      <font style="margin: 0.5em; text-decoration:underline; cursor:pointer; font-weight:bold" color="blue"
            *ngIf="(isAntennaDefault == 'customized' && customizedAntennaList.length == 0) ||
            (isAntennaDefault == 'default' && defaultAntennaList.length == 0) ">{{ 1 }}</font>
      {{">"}}
    </div>


  </ng-template>



  <ng-template #AddAntennaModalTable>
    <h5 mat-dialog-title>{{ 'antenna.add.title' | translate }}</h5>

    <table class="newAndEditAntTable">
      <tbody>
        <tr>
          <td>{{ 'antenna.name' | translate }}</td>
          <td>
            <input type="text" class="inputAntText" [(ngModel)]="addAntenna.name">
          </td>
        </tr>
        <tr>
          <td>{{ 'antenna.type' | translate }}</td>
          <td>
            <select step="2"
                    [(ngModel)]="addAntenna.type">
              <option value="Omnidirectional"> {{'Omnidirectional' | translate}} </option>
              <option value="Directional"> {{'Directional' | translate}} </option>
            </select>
          </td>
        </tr>
        <tr>
          <td>{{ 'antenna.band' | translate }}</td>
          <td>
            <input type="number" class="inputNum" [(ngModel)]="addAntenna.band[0]">
            ~
            <input type="number" class="inputNum" [(ngModel)]="addAntenna.band[1]">
          </td>
        </tr>
        <tr>
          <td>{{ 'antenna.port' | translate }}</td>
          <td>
            <input type="number" class="inputNum" [(ngModel)]="addAntenna.port">
          </td>
        </tr>
        <tr>
          <td>{{ 'manufactor' | translate }}</td>
          <td>
            <input type="text" class="inputAntText" [(ngModel)]="addAntenna.manufactor">
          </td>
        </tr>
        <tr>
          <td>{{ 'antenna.model' | translate }}</td>
          <td>
            <input type="text" class="inputAntText" [(ngModel)]="addAntenna.model">
          </td>
        </tr>
        <tr>
          <td>
            {{ 'antenna.rawdata' | translate }}
            (<a href="../../assets/file/ITRI_antenna_template.xlsx">{{ 'antenna.rawdata.example.download' | translate }}</a>)
          </td>
          <td>
            <button mat-stroked-button id="uploadBt" tabindex="-1" (click)="modelfile.click();">{{ 'antenna.add.file' | translate }}</button>
            <input type="file" #modelfile (change)="importAntFile($event, true)" style="display: none; width: 0%;" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">
            <span *ngIf="addAntenna.fileName != ''">&ensp;{{ addAntenna.fileName }}</span>
            <span *ngIf="addAntenna.fileName == ''">&ensp;{{ 'nofile' | translate }}</span>
          </td>
        </tr>
      </tbody>
    </table>

    <table style="margin-bottom: 0em">
      <tbody>
        <tr style="border-bottom-style:none">
          <td style="vertical-align: middle; padding-right: 0em">
            <button value="ok" (click)="AddAntennaOk()" style="float:right;">{{ 'planning.ok' | translate }}</button>
            <button value="cancel" (click)="AddAntennaCancel()" style="float:right;margin-right:2em;">{{ 'cancel' | translate }}</button>
          </td>
        </tr>
      </tbody>
    </table>

  </ng-template>


  <ng-template style="padding-bottom: 2em" #EditAntennaModalTable>
    <h5 mat-dialog-title>{{ 'antenna.edit.title' | translate }}</h5>

    <table class="newAndEditAntTable">
      <tbody>
        <tr>
          <td>{{ 'antenna.name' | translate }}</td>
          <td>
            <input type="text" class="inputAntText" [(ngModel)]="editAntenna.name">
          </td>
        </tr>
        <tr>
          <td>{{ 'antenna.type' | translate }}</td>
          <td>
            <select step="2"
                    [(ngModel)]="editAntenna.type">
              <option value="Omnidirectional"> {{'Omnidirectional' | translate}} </option>
              <option value="Directional"> {{'Directional' | translate}} </option>
            </select>
          </td>
        </tr>
        <tr>
          <td>{{ 'antenna.band' | translate }}</td>
          <td>
            <input type="number" class="inputNum" [(ngModel)]="editAntenna.band[0]">
            ~
            <input type="number" class="inputNum" [(ngModel)]="editAntenna.band[1]">
          </td>
        </tr>
        <tr>
          <td>{{ 'antenna.port' | translate }}</td>
          <td>
            <input type="number" class="inputNum" [(ngModel)]="editAntenna.port">
          </td>
        </tr>
        <tr>
          <td>{{ 'manufactor' | translate }}</td>
          <td>
            <input type="text" class="inputAntText" [(ngModel)]="editAntenna.manufactor">
          </td>
        </tr>
        <tr>
          <td>{{ 'antenna.model' | translate }}</td>
          <td>
            <input type="text" class="inputAntText" [(ngModel)]="editAntenna.model">
          </td>
        </tr>
        <tr>
          <td>
            {{ 'antenna.rawdata' | translate }}
            (<a href="../../assets/file/ITRI_antenna_template.xlsx">{{ 'antenna.rawdata.example.download' | translate }}</a>)
          </td>
          <td>
            <button mat-stroked-button id="uploadBt" tabindex="-1" (click)="modelfile.click();">{{ 'antenna.edit.file' | translate }}</button>
            <input type="file" #modelfile (change)="importAntFile($event, false)" style="display: none; width: 0%;" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">
            <span *ngIf="editAntenna.fileName != '' && !editAntenna.isNewFile" style="text-decoration:underline; cursor:pointer; margin-left:1em;" (click)="getAntennaRawdata(getCusAntennaIndexById(editAntenna.antennaID), true, 'customized')">{{ editAntenna.fileName }}</span>
            <span *ngIf="editAntenna.fileName != '' && editAntenna.isNewFile" style="margin-left:1em;">{{ editAntenna.fileName }}</span>
            <span *ngIf="editAntenna.fileName == ''">&ensp;{{ 'nofile' | translate }}</span>
          </td>
        </tr>
      </tbody>
    </table>

    <table style="margin-bottom: 0em">
      <tbody>
        <tr style="border-bottom-style:none">
          <td style="vertical-align: middle; padding-right: 0em">
            <button value="ok" (click)="EditAntennaOk()" style="float:right;">{{ 'planning.ok' | translate }}</button>
            <button value="cancel" (click)="EditAntennaCancel()" style="float:right;margin-right:2em;">{{ 'cancel' | translate }}</button>
          </td>
        </tr>
      </tbody>
    </table>

  </ng-template>


  <ng-template style="padding-bottom: 2em" #CheckAntennaRawdataModalTable>
    <h5 mat-dialog-title>
      【{{checkRawdataAntenna.name}}】
        {{ 'antenna.rawdata.title' | translate }}
       <i class="fa fa-times closeIcon" (click)="closeSecondLayer()"></i>
    </h5>
    <table style="margin-bottom: 0em">
      <tbody>
        <tr style="border-bottom-style:none; height: 30px">
          <td *ngIf="checkRawdataAntenna.property != 'default' || checkRawdataAntenna.type != 'Omnidirectional'"
              style="vertical-align: middle; padding: 0em; width:4em">
            <font>
              {{ 'antenna.rawdata.port.name' | translate }}
            </font>
          </td>
          <td *ngIf="checkRawdataAntenna.property != 'default' || checkRawdataAntenna.type != 'Omnidirectional'"
              style="vertical-align: middle; padding: 0em; width:16em">
            <select style="width: 10em;" (change)="changeAntennaRawdataPattern()" [(ngModel)]="checkRawdataAntenna.selectPort">
              <ng-container *ngFor="let item of checkRawdataAntenna.portList;">
                <option value={{item}}>
                  <!--option裡的value不能留空格，否則會出錯-->
                  <ng-container>{{ item }}</ng-container>
                </option>
              </ng-container>
            </select>
          </td>
          <td *ngIf="checkRawdataAntenna.property == 'default' && checkRawdataAntenna.type == 'Omnidirectional'"
              style="vertical-align: middle; padding: 0em; width:8em">
            <font>
              {{ 'antenna.dft.omn.simulation.txgain' | translate }}
            </font>
          </td>
          <td *ngIf="checkRawdataAntenna.property == 'default' && checkRawdataAntenna.type == 'Omnidirectional'"
              style="vertical-align: middle; padding: 0em; width:16em">
            <!--使用(input)可以即時監控數值變化而觸發函數，(ngModelChange)則需要等到按下enter或滑鼠時才可觸發-->
            <input #dftOmiAntGain style="width: 10em; height: 25px" [(ngModel)]="dftOmiAntSimulationTxGain"
                   (input)="changedftOmiAntRawdataPattern($event.target.value)" />&ensp;dB
          </td>
          <td rowspan="2" style="vertical-align: top; padding: 0em">
            <button *ngIf="checkRawdataAntenna.property != 'default' || checkRawdataAntenna.type != 'Omnidirectional'"
                    style="float: right" value="look" (click)="exportAntData()">
              {{ 'antenna.raw.export' | translate }}
            </button>
          </td>
        </tr>
        <tr style="border-bottom-style:none; height: 30px">
          <td *ngIf="checkRawdataAntenna.property != 'default' || checkRawdataAntenna.type != 'Omnidirectional'" style="vertical-align: middle; padding: 0em; width:9em">
            <font>
              {{ 'antenna.rawdata.freq' | translate }}
            </font>
          </td>
          <td *ngIf="checkRawdataAntenna.property != 'default' || checkRawdataAntenna.type != 'Omnidirectional'" style="vertical-align: middle; padding: 0em; width:9em">
            <select style="width: 10em;" (change)="changeAntennaRawdataPattern()" [(ngModel)]="checkRawdataAntenna.selectFreq">
              <ng-container *ngFor="let item of checkRawdataAntenna.freqList;">
                <option value={{item}}>
                  <!--option裡的value不能留空格，否則會出錯-->
                  <ng-container>{{ item }}</ng-container>&ensp;MHz
                </option>
              </ng-container>
            </select>
          </td>
        </tr>
        <tr style="border-bottom-style:none; height: 30px">
          <td *ngIf="checkRawdataAntenna.property != 'default' || checkRawdataAntenna.type != 'Omnidirectional'" style="vertical-align: middle; padding: 0em; width:9em">
            <font>
              {{ 'antenna.main.lobe.gain' | translate }}
            </font>
          </td>
          <td *ngIf="checkRawdataAntenna.property != 'default' || checkRawdataAntenna.type != 'Omnidirectional'" style="vertical-align: middle; padding: 0em; width:9em">
            <font>
              {{ checkRawdataAntenna.selectPortGain }} dB
            </font>
          </td>
        </tr>

      </tbody>
  </table>
  <table style="margin-bottom: 0em">
    <tbody>
      <tr style="border-bottom-style:none">
        <td style="vertical-align: middle; padding-left: 0em">
          <div id="thetaRawdata" style="width: 400px;height: 400px;"></div>
        </td>
        <td style="vertical-align: middle; padding-right: 0em">
          <div id="phiRawdata" style="width: 400px;height: 400px;"></div>
        </td>
      </tr>
      <tr style="border-bottom-style:none">
        <td style="text-align: center">
          {{ 'theta' | translate }}: {{ 'angleWithZaxis' | translate }}
          (<a href="javascript:void(0)" (click)="coordinateInfo()">{{ 'info' | translate }}</a>)
        </td>
        <td style="text-align: center">
          {{ 'phi' | translate }}: {{ 'angleWithXaxis' | translate }}
          (<a href="javascript:void(0)" (click)="coordinateInfo()">{{ 'info' | translate }}</a>)
        </td>
      </tr>

    </tbody>
  </table>
</ng-template>


<ng-template #RfModalTable>
  <h5 mat-dialog-title>BS{{svgNum}}{{'for' | translate}}{{ 'rfparam.setting' | translate }}</h5>
  <table class="rfParamTable">
    <!------------------------------>
    <!--   TDD              4G    -->
    <!------------------------------>
    <tbody *ngIf="duplexMode === 'tdd' && calculateForm.objectiveIndex == '0'">
      <tr *ngIf="planningIndex == '3'">
        <td>TxPower</td>
        <td>
          <input type="number" class="inputNum" step="1"
                 [(ngModel)]="bsListRfParam[svgId].txpower"
                 tabindex="-1">
        </td>dbm
      </tr>
      <tr *ngIf="planningIndex == '3'">
        <td>BeamId</td>
        <td><input type="text" [(ngModel)]="bsListRfParam[svgId].beampattern"></td>
      </tr>
      <tr>
        <td>{{ 'tddfrequency' | translate }}</td>
        <td>
          <input type="number" class="inputNumFreq" step="5"
                 [(ngModel)]="bsListRfParam[svgId].tddfrequency"
                 (select)="tempParamStorage(bsListRfParam[svgId].tddfrequency)"
                 (click)="tempParamStorage(bsListRfParam[svgId].tddfrequency)"
                 (change)="changeFrequency(svgId, '', false)"
                 tabindex="-1">
        </td>MHz
      </tr>
      <tr>
        <td>{{ 'tddBandwidth' | translate }}</td>
        <td>
          <select type="number" class="inputNum" step="5"
                  [(ngModel)]="bsListRfParam[svgId].tddbandwidth"
                  (change)="changeBandwidth('', false)">
            <option value="1.4">1.4</option>
            <option value="3">3</option>
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
          </select>
        </td>MHz
      </tr>
      <tr>
        <td>{{ 'mimoNum' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].mimoNumber4G">
            <ng-container *ngIf="planningIndex == '3' ; else otherMimoNumber4G">
              <option value=1>1</option>
              <option value=2>2</option>
              <option value=3>3</option>
              <option value=4>4</option>
            </ng-container>
            <ng-template #otherMimoNumber4G>
              <option value=1>1</option>
              <option value=2>2</option>
              <option value=4>4</option>
              <option value=8>8</option>
            </ng-template>
          </select>
        </td>
      </tr>
    </tbody>
    <!------------------------------>
    <!--   FDD              4G    -->
    <!------------------------------>
    <tbody *ngIf="duplexMode === 'fdd' && calculateForm.objectiveIndex == '0'">
      <tr *ngIf="planningIndex == '3'">
        <td>TxPower</td>
        <td>
          <input type="number" class="inputNum" step="1"
                 [(ngModel)]="bsListRfParam[svgId].txpower"
                 tabindex="-1">
        </td>dbm
      </tr>
      <!-- <tr *ngIf="planningIndex == '3'">
        <td>BeamId</td>
        <td><input type="text"
          [(ngModel)]="bsListRfParam[svgId].beampattern"
          tabindex="-1"
          ></td>
      </tr> -->
      <tr>
        <td>{{ 'uplink.frequency' | translate }}</td>
        <td>
          <input type="number" class="inputNumFreq" step="5"
                 [(ngModel)]="bsListRfParam[svgId].fddUlFrequency"
                 (select)="tempParamStorage(bsListRfParam[svgId].fddUlFrequency)"
                 (click)="tempParamStorage(bsListRfParam[svgId].fddUlFrequency)"
                 (change)="changeFrequency(svgId, 'ul', false)"
                 tabindex="-1">
        </td>MHz
      </tr>
      <tr>
        <td>{{ 'downlink.frequency' | translate }}</td>
        <td>
          <input type="number" class="inputNumFreq" step="5"
                 [(ngModel)]="bsListRfParam[svgId].fddDlFrequency"
                 (select)="tempParamStorage(bsListRfParam[svgId].fddDlFrequency)"
                 (click)="tempParamStorage(bsListRfParam[svgId].fddDlFrequency)"
                 (change)="changeFrequency(svgId, 'dl', false)"
                 tabindex="-1">
        </td>MHz
      </tr>
      <tr>
        <td>{{ 'ulBandwidth' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].ulBandwidth"
                  (change)="changeBandwidth('ul', false)"
                  style="width: 100px;">
            MHz
            <option value="1.4">1.4</option>
            <option value="3">3</option>
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'dlBandwidth' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].dlBandwidth"
                  (change)="changeBandwidth('dl', false)"
                  style="width: 100px;">
            <option value="1.4">1.4</option>
            <option value="3">3</option>
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'mimoNum' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].mimoNumber4G" style="width: 100px;">
            <ng-container *ngIf="planningIndex == '3' ; else otherMimoNumber4G">
              <option value=1>1</option>
              <option value=2>2</option>
              <option value=3>3</option>
              <option value=4>4</option>
            </ng-container>
            <ng-template #otherMimoNumber4G>
              <option value=1>1</option>
              <option value=2>2</option>
              <option value=4>4</option>
              <option value=8>8</option>
            </ng-template>
          </select>
        </td>
      </tr>
    </tbody>
    <!------------------------------>
    <!--   TDD              5G    -->
    <!------------------------------>
    <tbody *ngIf="duplexMode === 'tdd' && calculateForm.objectiveIndex == '1'">

      <!-- <tr *ngIf="planningIndex == '3'">
    <td>基站類型</td>
    <td>
      <select type="number" class="inputNum" step="2">
        <option value="1.4">一體式基站</option>
        <option value="3">分佈式基站</option>
      </select>
    </td>
  </tr>-->
      <tr *ngIf="planningIndex == '3'">
        <td>{{ 'txpower' | translate }}</td>
        <td>
          <input type="number" class="inputNum" step="1"
                 [(ngModel)]="bsListRfParam[svgId].txpower"
                 tabindex="-1"> dbm
        </td>
      </tr>
      <!-- <tr *ngIf="planningIndex == '3'">
    <td>BeamId</td>
    <td><input type="text"
      [(ngModel)]="bsListRfParam[svgId].beampattern"
      tabindex="-1"
      ></td>
  </tr> -->
      <tr>
        <td>{{ 'tddfrequency' | translate }}</td>
        <td>
          <input type="number" class="inputNumFreq" step="5"
                 [(ngModel)]="bsListRfParam[svgId].tddfrequency"
                 (select)="tempParamStorage(bsListRfParam[svgId].tddfrequency)"
                 (click)="tempParamStorage(bsListRfParam[svgId].tddfrequency)"
                 (change)="changeFrequency(svgId, '', false)"
                 tabindex="-1"> MHz
        </td>
      </tr>
      <!-- <tr>
    <td>{{ 'tddBandwidth' | translate }}</td>
    <td><input type="text" [(ngModel)]="bsListRfParam[svgId].tddbandwidth"></td>
  </tr> -->
      <tr>
        <td>{{ 'subcarrier' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].tddscs"
                  (change)="changeScs(bsListRfParam[svgId].tddscs, 'tdd', false)"
                  style="width: 175px;">
            <option value=15>15</option>
            <option value=30>30</option>
            <option value=60>60</option>
          </select> kHz
        </td>
      </tr>
      <tr>
        <td>{{ 'scsBandwidth' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].tddbandwidth"
                  (change)="changeBandwidth('', false)"
                  style="width: 175px;" *ngIf="bsListRfParam[svgId].tddscs == '15'">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50">50</option>
          </select>
          <select [(ngModel)]="bsListRfParam[svgId].tddbandwidth"
                  (change)="changeBandwidth('', false)"
                  style="width: 175px;" *ngIf="bsListRfParam[svgId].tddscs == '30'">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50">50</option>
            <option value="60">60</option>
            <option value="70">70</option>
            <option value="80">80</option>
            <option value="90">90</option>
            <option value="100">100</option>
          </select>
          <select [(ngModel)]="bsListRfParam[svgId].tddbandwidth"
                  (change)="changeBandwidth('', false)"
                  style="width: 175px;" *ngIf="bsListRfParam[svgId].tddscs == '60'">
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50">50</option>
            <option value="60">60</option>
            <option value="70">70</option>
            <option value="80">80</option>
            <option value="90">90</option>
            <option value="100">100</option>
          </select> MHz
        </td>
      </tr>
      <tr>
        <td>{{ 'ulMimolayer' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].ulMimoLayer" style="width: 175px;">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="4">4</option>
            <option value="8">8</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'dlMimolayer' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].dlMimoLayer" style="width: 175px;">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="4">4</option>
            <option value="8">8</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'ULModulationCodingScheme' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].ulModulationCodScheme" style="width: 175px;">
            <ng-container *ngIf="planningIndex == '3' ; else othterUlModulationCodScheme">
              <option value="64QAM-table">64QAM</option>
              <option value="256QAM-table">256QAM</option>
              <option value="64QAM-table-lowSE">64QAM-table-lowSE</option>
            </ng-container>
            <ng-template #othterUlModulationCodScheme>
              <option value="64QAM-table">64QAM-table</option>
              <option value="256QAM-table">256QAM-table</option>
              <option value="64QAM-table-lowSE">64QAM-table-lowSE</option>
            </ng-template>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'DLModulationCodingScheme' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].dlModulationCodScheme" style="width: 175px;">
            <ng-container *ngIf="planningIndex == '3' ; else othterUlModulationCodScheme">
              <option value="64QAM-table">64QAM</option>
              <option value="256QAM-table">256QAM</option>
              <option value="64QAM-Low-SE">64QAM-Low-SE</option>
            </ng-container>
            <ng-template #othterUlModulationCodScheme>
              <option value="64QAM-table">64QAM-table</option>
              <option value="256QAM-table">256QAM-table</option>
              <option value="64QAM-table-lowSE">64QAM-table-lowSE</option>
            </ng-template>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'noise' | translate }}</td>
        <td>
          <input type="number" class="inputNum" step="1"
                 [(ngModel)]="bsListRfParam[svgId].bsNoiseFigure"
                 tabindex="-1"> dB
        </td>
      </tr>
      <tr>
        <td>{{ 'antenna.proptype' | translate }}</td>
        <td>
          <mat-radio-group [(ngModel)]="bsListRfParam[svgId].isAntennaDefault" (change)="antennaProptypeChangeCheck(svgId)" [disabled]="planningIndex != '3'">
            <mat-radio-button class="mat-radio-button-ant" value='default' [checked]="bsListRfParam[svgId].isAntennaDefault == 'default'" style="margin-right: 15px; margin-top: 0.5em">{{ 'default.antenna' | translate }}</mat-radio-button>
            <mat-radio-button class="mat-radio-button-ant" value='customized' [checked]="bsListRfParam[svgId].isAntennaDefault == 'customized'" style="margin-right: 15px; margin-top: 0.5em">{{ 'custom.antenna' | translate }}</mat-radio-button>
          </mat-radio-group>
        </td>
      </tr>
      <tr>
        <td>{{ 'antenna' | translate }}</td>
        <td>
          <select style="width: 15em;" (change)="antennaChangeCheck(svgId)" [(ngModel)]="bsListRfParam[svgId].AntennaId"
                  [disabled]="planningIndex != '3' ||
                  (defaultAntennaList.length == 0 && bsListRfParam[svgId].isAntennaDefault == 'default') ||
                  (customizedAntennaList.length == 0 && bsListRfParam[svgId].isAntennaDefault == 'customized')">
            <ng-container *ngIf="defaultAntennaList.length == 0 && bsListRfParam[svgId].isAntennaDefault == 'default'">
              <option value={{0}}>
                <ng-container>{{ 'antenna.no.data' | translate }}</ng-container>
              </option>
            </ng-container>
            <ng-container *ngFor="let item of defaultAntennaList;">
              <option *ngIf="bsListRfParam[svgId].isAntennaDefault == 'default'" value={{item.antennaID}}>
                <ng-container>{{ item.name }}</ng-container>
              </option>
            </ng-container>
            <ng-container *ngIf="customizedAntennaList.length == 0 && bsListRfParam[svgId].isAntennaDefault == 'customized'">
              <option value={{0}}>
                <ng-container>{{ 'antenna.no.data' | translate }}</ng-container>
              </option>
            </ng-container>
            <ng-container *ngFor="let item of customizedAntennaList;">
              <option *ngIf="bsListRfParam[svgId].isAntennaDefault == 'customized'" value={{item.antennaID}}>
                <ng-container>{{ item.name }}</ng-container>
              </option>
            </ng-container>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'antenna.type.fullname' | translate }}</td>
        <td>
          <font>
            {{ selectAntenna.type | translate }}
          </font>
        </td>
      </tr>
      <tr>
        <td>{{ 'manufactor' | translate }}</td>
        <td>
          <font>
            {{ selectAntenna.manufactor }}
          </font>
        </td>
      </tr>
      <tr *ngIf="(selectAntenna.type != 'Omnidirectional' || bsListRfParam[svgId].isAntennaDefault != 'default')">
        <td>{{ 'antenna.freq' | translate }}</td>
        <td>
          <select style="width: 175px;" (change)="antennaFreqPortChangeCheck(svgId)"
                  [(ngModel)]="selectAntenna.selectFreqId" [disabled]="planningIndex != '3' || selectAntenna.availableFrequency.length == 0">
            <ng-container *ngFor="let item of selectAntenna.availableFrequency;">
              <option value={{item.frequencyId}}>
                <ng-container>{{ item.frequency }}</ng-container>
              </option> MHz
            </ng-container>
          </select>
        </td>
      </tr>
      <tr *ngIf="selectAntenna.type != 'Omnidirectional' || bsListRfParam[svgId].isAntennaDefault != 'default'">
        <td>{{ 'antenna.port.name' | translate }}</td>
        <td>
          <select style="width: 175px;" (change)="antennaFreqPortChangeCheck(svgId)" [(ngModel)]="selectAntenna.selectPortID" [disabled]="planningIndex != '3' || selectAntenna.availablePorts.length == 0">
            <ng-container *ngFor="let item of selectAntenna.availablePorts;">
              <option value={{item.portID}}>
                <ng-container>{{ item.portName }}</ng-container>
              </option>
            </ng-container>
          </select>
        </td>
      </tr>
      <ng-container *ngIf="selectAntenna.type == 'Directional'">
        <tr>
          <td>
            {{ 'theta' | translate }}: {{ 'angleWithZaxis' | translate }}
            (<a href="javascript:void(0)" (click)="coordinateInfo()">{{ 'info' | translate }}</a>)
          </td>
          <td>
            <input type="number" class="inputNum" step="1"
                   [(ngModel)]="bsListRfParam[svgId].theta"
                   (select)="tempParamStorage(bsListRfParam[svgId].theta)"
                   (click)="tempParamStorage(bsListRfParam[svgId].theta)"
                   (change)="changeTheta(svgId, false)"> {{ 'angle' | translate }}
          </td>
        </tr>
        <tr>
          <td>
            {{ 'phi' | translate }}: {{ 'angleWithXaxis' | translate }}
            (<a href="javascript:void(0)" (click)="coordinateInfo()">{{ 'info' | translate }}</a>)
          </td>
          <td>
            <input type="number" class="inputNum" step="1"
                   [(ngModel)]="bsListRfParam[svgId].phi"
                   (select)="tempParamStorage(bsListRfParam[svgId].phi)"
                   (click)="tempParamStorage(bsListRfParam[svgId].phi)"
                   (change)="changePhi(svgId, false)"
                   tabindex="-1"> {{ 'angle' | translate }}
          </td>
        </tr>
      </ng-container>
      <tr *ngIf="selectAntenna.type == 'Omnidirectional' && bsListRfParam[svgId].isAntennaDefault == 'default'">
        <td>{{ 'TxGain' | translate }}</td>
        <td>
          <input type="number" class="inputNum" step="1"
                 [(ngModel)]="bsListRfParam[svgId].bsTxGain"
                 tabindex="-1"> dB
        </td>
      </tr>
    </tbody>
    <!------------------------------>
    <!--   FDD              5G    -->
    <!------------------------------>
    <tbody *ngIf="duplexMode == 'fdd' && calculateForm.objectiveIndex == '1'">
      <tr *ngIf="planningIndex == '3'">
        <td>{{ 'txpower' | translate }}</td>
        <td>
          <input type="number" class="inputNum" step="1"
                 [(ngModel)]="bsListRfParam[svgId].txpower"
                 tabindex="-1"> dbm
        </td>
      </tr>
      <!-- <tr *ngIf="planningIndex == '3'">
    <td>BeamId</td>
    <td><input type="text"
      [(ngModel)]="bsListRfParam[svgId].beampattern"
      tabindex="-1"
      ></td>
  </tr> -->
      <tr>
        <td>{{ 'uplink.frequency' | translate }}</td>
        <td>
          <input type="number" class="inputNumFreq" step="5"
                 [(ngModel)]="bsListRfParam[svgId].fddUlFrequency"
                 (select)="tempParamStorage(bsListRfParam[svgId].fddUlFrequency)"
                 (click)="tempParamStorage(bsListRfParam[svgId].fddUlFrequency)"
                 (change)="changeFrequency(svgId, 'ul', false)"
                 tabindex="-1"> MHz
        </td>
      </tr>
      <tr>
        <td>{{ 'downlink.frequency' | translate }}</td>
        <td>
          <input type="number" class="inputNumFreq" step="5"
                 [(ngModel)]="bsListRfParam[svgId].fddDlFrequency"
                 (select)="tempParamStorage(bsListRfParam[svgId].fddDlFrequency)"
                 (click)="tempParamStorage(bsListRfParam[svgId].fddDlFrequency)"
                 (change)="changeFrequency(svgId, 'dl', false)"
                 tabindex="-1"> MHz
        </td>
      </tr>
      <tr>
        <td>{{ 'ulMimolayer' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].ulMimoLayer" style="width: 100px;">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="4">4</option>
            <option value="8">8</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'dlMimolayer' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].dlMimoLayer" style="width: 100px;">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="4">4</option>
            <option value="8">8</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'ULModulationCodingScheme' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].ulModulationCodScheme" style="width: 150px;">
            <ng-container *ngIf="planningIndex == '3' ; else othterUlModulationCodScheme">
              <option value="64QAM-table">64QAM</option>
              <option value="256QAM-table">256QAM</option>
              <option value="64QAM-table-lowSE">64QAM-table-lowSE</option>
            </ng-container>
            <ng-template #othterUlModulationCodScheme>
              <option value="64QAM-table">64QAM-table</option>
              <option value="256QAM-table">256QAM-table</option>
              <option value="64QAM-table-lowSE">64QAM-table-lowSE</option>
            </ng-template>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'DLModulationCodingScheme' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].dlModulationCodScheme" style="width: 150px;">
            <ng-container *ngIf="planningIndex == '3' ; else othterUlModulationCodScheme">
              <option value="64QAM-table">64QAM</option>
              <option value="256QAM-table">256QAM</option>
              <option value="64QAM-Low-SE">64QAM-Low-SE</option>
            </ng-container>
            <ng-template #othterUlModulationCodScheme>
              <option value="64QAM-table">64QAM-table</option>
              <option value="256QAM-table">256QAM-table</option>
              <option value="64QAM-table-lowSE">64QAM-table-lowSE</option>
            </ng-template>
          </select>
        </td>
      </tr>
      <!-- <tr>
    <td>{{ 'subcarrier' | translate }}</td>
    <td>
      <select [(ngModel)]="bsListRfParam[svgId].tddscs" style="width: 100px;" >
        <option value=15>15</option>
        <option value=30>30</option>
        <option value=60>60</option>
        <option value=120>120</option>
      </select>
    </td>
  </tr> -->
      <tr>
        <td>{{ 'ulSubcarrier' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].ulScs"
                  (change)="changeScs(bsListRfParam[svgId].ulScs, 'ul', false)"
                  style="width: 100px;">
            <option value=15>15</option>
            <option value=30>30</option>
            <option value=60>60</option>
          </select> kHz
        </td>
      </tr>
      <tr>
        <td>{{ 'ulBandwidth' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].ulBandwidth"
                  (change)="changeBandwidth('ul', false)"
                  style="width: 100px;" *ngIf="bsListRfParam[svgId].ulScs == '15'">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50">50</option>
          </select>
          <select [(ngModel)]="bsListRfParam[svgId].ulBandwidth"
                  (change)="changeBandwidth('ul', false)"
                  style="width: 100px;" *ngIf="bsListRfParam[svgId].ulScs == '30'">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50">50</option>
            <option value="60">60</option>
            <option value="70">70</option>
            <option value="80">80</option>
            <option value="90">90</option>
            <option value="100">100</option>
          </select>
          <select [(ngModel)]="bsListRfParam[svgId].ulBandwidth"
                  (change)="changeBandwidth('ul', false)"
                  style="width: 100px;" *ngIf="bsListRfParam[svgId].ulScs == '60'">
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50">50</option>
            <option value="60">60</option>
            <option value="70">70</option>
            <option value="80">80</option>
            <option value="90">90</option>
            <option value="100">100</option>
          </select> MHz
        </td>
      </tr>
      <tr>
        <td>{{ 'dlSubcarrier' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].dlScs"
                  (change)="changeScs(bsListRfParam[svgId].dlScs, 'dl',false)"
                  style="width: 100px;">
            <option value=15>15</option>
            <option value=30>30</option>
            <option value=60>60</option>
          </select> kHz
        </td>
      </tr>
      <tr>
        <td>{{ 'dlBandwidth' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].dlBandwidth"
                  (change)="changeBandwidth('dl', false)"
                  style="width: 100px;" *ngIf="bsListRfParam[svgId].dlScs == '15'">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50">50</option>
          </select>
          <select [(ngModel)]="bsListRfParam[svgId].dlBandwidth"
                  (change)="changeBandwidth('dl', false)"
                  style="width: 100px;" *ngIf="bsListRfParam[svgId].dlScs == '30'">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50">50</option>
            <option value="60">60</option>
            <option value="70">70</option>
            <option value="80">80</option>
            <option value="90">90</option>
            <option value="100">100</option>
          </select>
          <select [(ngModel)]="bsListRfParam[svgId].dlBandwidth"
                  (change)="changeBandwidth('dl', false)"
                  style="width: 100px;" *ngIf="bsListRfParam[svgId].dlScs == '60'">
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50">50</option>
            <option value="60">60</option>
            <option value="70">70</option>
            <option value="80">80</option>
            <option value="90">90</option>
            <option value="100">100</option>
          </select> MHz
        </td>
      </tr>
      <tr>
        <td>{{ 'noise' | translate }}</td>
        <td>
          <input type="number" class="inputNum" step="1"
                 [(ngModel)]="bsListRfParam[svgId].bsNoiseFigure"
                 tabindex="-1"> dB
        </td>
      </tr>

      <tr>
        <td>{{ 'antenna.proptype' | translate }}</td>
        <td>
          <mat-radio-group [(ngModel)]="bsListRfParam[svgId].isAntennaDefault" (change)="antennaProptypeChangeCheck(svgId)" [disabled]="planningIndex != '3'">
            <mat-radio-button class="mat-radio-button-ant" value="default" [checked]="bsListRfParam[svgId].isAntennaDefault == 'default'" style="margin-right: 15px; margin-top: 0.5em">{{ 'default.antenna' | translate }}</mat-radio-button>
            <mat-radio-button class="mat-radio-button-ant" value="customized" [checked]="bsListRfParam[svgId].isAntennaDefault == 'customized'" style="margin-right: 15px; margin-top: 0.5em">{{ 'custom.antenna' | translate }}</mat-radio-button>
          </mat-radio-group>
        </td>
      </tr>
      <tr>
        <td>{{ 'antenna' | translate }}</td>
        <td>
          <select style="width: 15em;" (change)="antennaChangeCheck(svgId)" [(ngModel)]="bsListRfParam[svgId].AntennaId"
                  [disabled]="planningIndex != '3' ||
                  (defaultAntennaList.length == 0 && bsListRfParam[svgId].isAntennaDefault == 'default') ||
                  (customizedAntennaList.length == 0 && bsListRfParam[svgId].isAntennaDefault == 'customized')">
            <ng-container *ngIf="defaultAntennaList.length == 0 && bsListRfParam[svgId].isAntennaDefault == 'default'">
              <option value={{0}}>
                <ng-container>{{ 'antenna.no.data' | translate }}</ng-container>
              </option>
            </ng-container>
            <ng-container *ngFor="let item of defaultAntennaList;">
              <option *ngIf="bsListRfParam[svgId].isAntennaDefault == 'default'" value={{item.antennaID}}>
                <ng-container>{{ item.name }}</ng-container>
              </option>
            </ng-container>
            <ng-container *ngIf="customizedAntennaList.length == 0 && bsListRfParam[svgId].isAntennaDefault == 'customized'">
              <option value={{0}}>
                <ng-container>{{ 'antenna.no.data' | translate }}</ng-container>
              </option>
            </ng-container>
            <ng-container *ngFor="let item of customizedAntennaList;">
              <option *ngIf="bsListRfParam[svgId].isAntennaDefault == 'customized'" value={{item.antennaID}}>
                <ng-container>{{ item.name }}</ng-container>
              </option>
            </ng-container>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'antenna.type.fullname' | translate }}</td>
        <td>
          <font>
            {{ selectAntenna.type | translate }}
          </font>
        </td>
      </tr>
      <tr>
        <td>{{ 'manufactor' | translate }}</td>
        <td>
          <font>
            {{ selectAntenna.manufactor }}
          </font>
        </td>
      </tr>
      <tr *ngIf="(selectAntenna.type != 'Omnidirectional' || bsListRfParam[svgId].isAntennaDefault != 'default')">
        <td>{{ 'antenna.freq' | translate }}</td>
        <td>
          <select style="width: 175px;" (change)="antennaFreqPortChangeCheck(svgId)"
                  [(ngModel)]="selectAntenna.selectFreqId" [disabled]="planningIndex != '3' || selectAntenna.availableFrequency.length == 0">
            <ng-container *ngFor="let item of selectAntenna.availableFrequency;">
              <option value={{item.frequencyId}}>
                <ng-container>{{ item.frequency }}</ng-container>
              </option> MHz
            </ng-container>
          </select>
        </td>
      </tr>
      <tr *ngIf="selectAntenna.type != 'Omnidirectional' || bsListRfParam[svgId].isAntennaDefault != 'default'">
        <td>{{ 'antenna.port.name' | translate }}</td>
        <td>
          <select style="width: 175px;" (change)="antennaFreqPortChangeCheck(svgId)" [(ngModel)]="selectAntenna.selectPortID" [disabled]="planningIndex != '3' || selectAntenna.availablePorts.length == 0">
            <ng-container *ngFor="let item of selectAntenna.availablePorts;">
              <option value={{item.portID}}>
                <ng-container>{{ item.portName }}</ng-container>
              </option>
            </ng-container>
          </select>
        </td>
      </tr>
      <ng-container *ngIf="selectAntenna.type == 'Directional'">
        <tr>
          <td>
            {{ 'theta' | translate }}: {{ 'angleWithZaxis' | translate }}
            (<a href="javascript:void(0)" (click)="coordinateInfo()">{{ 'info' | translate }}</a>)
          </td>
          <td>
            <input type="number" class="inputNum" step="1"
                   [(ngModel)]="bsListRfParam[svgId].theta"
                   (select)="tempParamStorage(bsListRfParam[svgId].theta)"
                   (click)="tempParamStorage(bsListRfParam[svgId].theta)"
                   (change)="changeTheta(svgId, false)"> {{ 'angle' | translate }}
          </td>
        </tr>
        <tr>
          <td>
            {{ 'phi' | translate }}: {{ 'angleWithXaxis' | translate }}
            (<a href="javascript:void(0)" (click)="coordinateInfo()">{{ 'info' | translate }}</a>)
          </td>
          <td>
            <input type="number" class="inputNum" step="1"
                   [(ngModel)]="bsListRfParam[svgId].phi"
                   (select)="tempParamStorage(bsListRfParam[svgId].phi)"
                   (click)="tempParamStorage(bsListRfParam[svgId].phi)"
                   (change)="changePhi(svgId, false)"
                   tabindex="-1"> {{ 'angle' | translate }}
          </td>
        </tr>
      </ng-container>
      <tr *ngIf="selectAntenna.type == 'Omnidirectional' && bsListRfParam[svgId].isAntennaDefault == 'default'">
        <td>{{ 'TxGain' | translate }}</td>
        <td>
          <input type="number" class="inputNum" step="1"
                 [(ngModel)]="bsListRfParam[svgId].bsTxGain"
                 tabindex="-1"> dB
        </td>
      </tr>
      <!--
  <tr>
    <td>{{ 'antenna' | translate }}</td>
    <td>
      <select style="width: 12em;" [disabled]="planningIndex != '3'" (change)="antennaChangeCheck(svgId)" [(ngModel)]="bsListRfParam[svgId].AntennaId" [disabled]="planningIndex != '3'">
        <ng-container *ngFor="let item of antennaList;">
          <option value={{item.id}}>
            <ng-container>{{ item.name }}</ng-container>
          </option>
        </ng-container>
      </select>
    </td>
  </tr>

  <tr>
    <td>{{ 'manufactor' | translate }}</td>
    <td>
      <select style="width: 175px;" [(ngModel)]="manufactor" (change)="manufactorChange(svgId)" [disabled]="planningIndex != '3'">
        <option value="All">{{ 'notSpecify' | translate }}</option>
        <option value={{item}} *ngFor="let item of AntennaManufactorList">
          {{item}}
        </option>
      </select>
    </td>
  </tr>
  <ng-container *ngIf="antennaList[AntennaIdToIndex[bsListRfParam[svgId].AntennaId]]['antennaType'] == 'Directional' ; else txGainColumnFDD">
    <tr>
      <td>
        {{ 'theta' | translate }}: {{ 'angleWithZaxis' | translate }}
        (<a href="javascript:void(0)" (click)="coordinateInfo()">{{ 'info' | translate }}</a>)
      </td>
      <td>
        <input type="number" class="inputNum" step="1"
               [(ngModel)]="bsListRfParam[svgId].theta"
               (select)="tempParamStorage(bsListRfParam[svgId].theta)"
               (click)="tempParamStorage(bsListRfParam[svgId].theta)"
               (change)="changeTheta(svgId, false)"
               tabindex="-1"> {{ 'angle' | translate }}
      </td>
    </tr>
    <tr>
      <td>
        {{ 'phi' | translate }}: {{ 'angleWithXaxis' | translate }}
        (<a href="javascript:void(0)" (click)="coordinateInfo()">{{ 'info' | translate }}</a>)
      </td>
      <td>
        <input type="number" class="inputNum" step="1"
               [(ngModel)]="bsListRfParam[svgId].phi"
               (select)="tempParamStorage(bsListRfParam[svgId].phi)"
               (click)="tempParamStorage(bsListRfParam[svgId].phi)"
               (change)="changePhi(svgId, false)"
               tabindex="-1"> {{ 'angle' | translate }}
      </td>
    </tr>
  </ng-container>
  <ng-template #txGainColumnFDD>
    <tr>
      <td>{{ 'TxGain' | translate }}</td>
      <td>
        <input type="number" class="inputNum" step="1"
               [(ngModel)]="bsListRfParam[svgId].bsTxGain"
               tabindex="-1"> dB
      </td>
    </tr>
  </ng-template>-->
    </tbody>
    <!------------------------------>
    <!--   WiFi                   -->
    <!------------------------------>
    <tbody *ngIf="calculateForm.objectiveIndex == '2'">
      <tr *ngIf="planningIndex == '3'">
        <td>TxPower</td>
        <td>
          <input type="number" class="inputNum" step="1"
                 [(ngModel)]="bsListRfParam[svgId].txpower"
                 tabindex="-1">dbm
        </td>
      </tr>
      <!-- <tr *ngIf="planningIndex == '3'">
        <td>BeamId</td>
        <td><input type="text"
          [(ngModel)]="bsListRfParam[svgId].beampattern"
          tabindex="-1"
          ></td>
      </tr> -->
      <tr>
        <td>{{ 'tddfrequency' | translate }}</td>
        <td *ngIf="bsListRfParam[svgId].wifiProtocol != 'wifi5'">
          <select type="number" class="inputNum"
                  [(ngModel)]="bsListRfParam[svgId].wifiFrequency"
                  style="width: 100px;">
            <option *ngFor="let band of wifiFreqList2_4g" [ngValue]="band">{{band}}</option>
            <option *ngFor="let band of wifiFreqList5g" [ngValue]="band">{{band}}</option>
          </select>
        </td>
        <td *ngIf="bsListRfParam[svgId].wifiProtocol == 'wifi5'">
          <select type="number" class="inputNum"
                  [(ngModel)]="bsListRfParam[svgId].wifiFrequency"
                  style="width: 100px;">
            <option *ngFor="let band of wifiFreqList5g" [ngValue]="band">{{band}}</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'wifiProtocol' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].wifiProtocol"
                  (change)="changeWifiProtocol(bsListRfParam[svgId].wifiProtocol,false)"
                  style="width: 100px;">
            <option value="wifi4">WiFi4</option>
            <option value="wifi5">WiFi5</option>
            <option value="wifi6">WiFi6</option>
          </select>
        </td>
      </tr>
      <tr *ngIf="calculateForm.objectiveIndex == '2'">
        <td>{{ 'tddBandwidth' | translate }}</td>
        <td *ngIf="bsListRfParam[svgId].wifiProtocol == 'wifi4'">
          <select type="number" class="inputNum" step="5"
                  [(ngModel)]="bsListRfParam[svgId].wifiBandwidth"
                  (change)="changeBandwidth('', true)"
                  style="width: 100px;">
            <option value="20">20</option>
            <option value="40">40</option>
          </select>MHz
        </td>
        <td *ngIf="bsListRfParam[svgId].wifiProtocol == 'wifi5'">
          <select type="number" class="inputNum" step="5"
                  [(ngModel)]="bsListRfParam[svgId].wifiBandwidth"
                  (change)="changeBandwidth('', true)"
                  style="width: 100px;">
            <option value="40">40</option>
            <option value="80">80</option>
            <option value="160">160</option>
          </select>MHz
        </td>
        <td *ngIf="bsListRfParam[svgId].wifiProtocol == 'wifi6'">
          <select type="number" class="inputNum" step="5"
                  [(ngModel)]="bsListRfParam[svgId].wifiBandwidth"
                  (change)="changeBandwidth('', true)"
                  style="width: 100px;">
            <option value="20">20</option>
            <option value="40">40</option>
            <option value="80">80</option>
            <option value="160">160</option>
          </select>MHz
        </td>
      </tr>
      <tr>
        <td>{{ 'guardInterval' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].guardInterval" style="width: 100px;">
            <option *ngIf="bsListRfParam[svgId].wifiProtocol != 'wifi6'" value="400ns">400ns</option>
            <option value="800ns">800ns</option>
            <option *ngIf="bsListRfParam[svgId].wifiProtocol == 'wifi6'" value="1600ns">1600ns</option>
            <option *ngIf="bsListRfParam[svgId].wifiProtocol == 'wifi6'" value="3200ns">3200ns</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>{{ 'wifiMimo' | translate }}</td>
        <td>
          <select [(ngModel)]="bsListRfParam[svgId].wifiMimo" style="width: 100px;">
            <!-- <option value="1x1">1x1</option> -->
            <option value="2x2">2x2</option>
            <option value="3x3">3x3</option>
            <option value="4x4">4x4</option>
            <option *ngIf="bsListRfParam[svgId].wifiProtocol != 'wifi4'" value="8x8">8x8</option>
          </select>
        </td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #deleteModal>
  <h5 mat-dialog-title>{{ 'deleteTitle' | translate }}</h5>
  <div mat-dialog-content>
    <p *ngIf="dragObject[svgId].type == 'defaultBS'">{{ 'deletePara' | translate }} {{ 'defaultBs' | translate }}{{ svgNum }}?</p>
    <p *ngIf="dragObject[svgId].type == 'candidate'">{{ 'deletePara' | translate }} {{ 'result.propose.candidateBs' | translate }}{{ svgNum }}?</p>
    <p *ngIf="dragObject[svgId].type !== 'defaultBS' && dragObject[svgId].type !== 'candidate'">{{ 'deletePara' | translate }}?</p>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="notDelete()">{{ 'deleteCancel' | translate }}</button>
    <button *ngIf="deleteList.length == 0" mat-button (click)="delete(false)" cdkFocusInitial>{{ 'deleteSure' | translate }}</button>
  </div>
</ng-template>

<ng-template #deleteModal2>
  <h5 mat-dialog-title>{{ 'deleteTitle' | translate }}</h5>
  <div mat-dialog-content>
    <p>{{ 'deleteExceedField' | translate }}</p>
    <!-- <p>我們將刪掉座標大於場域長寬的障礙物，基地台，UE，您同意嗎?</p> -->
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="notDelete()">{{ 'deleteCancel' | translate }}</button>
    <button *ngIf="deleteList.length != 0" mat-button (click)="delete(true)" cdkFocusInitial>{{ 'deleteSure' | translate }}</button>
  </div>
</ng-template>

<ng-template #changeToSimulationModal>
  <h5 mat-dialog-title>{{ 'changeToSimulationTitle' | translate }}</h5>
  <div mat-dialog-content>
    <p>{{ 'changeToSimulationText' | translate }}?</p>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="changeToSimulation(false)">{{ 'deleteCancel' | translate }}</button>
    <button mat-button (click)="changeToSimulation(true)" cdkFocusInitial>{{ 'deleteSure' | translate }}</button>
  </div>
</ng-template>


<!-- <ng-template #deleteModal3>
  <h5 mat-dialog-title>{{ 'applyTitle' | translate }}</h5>
  <div mat-dialog-content>
    <p>{{ 'applyAllSameBandwidth' | translate }}</p>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="notApplySameBandwidth(modalParam.dir, modalParam.isCandidate)">{{ 'deleteCancel' | translate }}</button>
    <button mat-button (click)="applyAllSameBandwidth(modalParam.dir, modalParam.isCandidate)" cdkFocusInitial>{{ 'deleteSure' | translate }}</button>
  </div>
</ng-template>

<ng-template #deleteModal4>
  <h5 mat-dialog-title>{{ 'applyTitle' | translate }}</h5>
  <div mat-dialog-content>
    <p>{{ 'applyAllSameFrequency' | translate }}</p>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="notApplyAllSameFrequency(modalParam.dir, modalParam.isCandidate)">{{ 'deleteCancel' | translate }}</button>
    <button mat-button (click)="applyAllSameFrequency(modalParam.dir, modalParam.isCandidate)" cdkFocusInitial>{{ 'deleteSure' | translate }}</button>
  </div>
</ng-template>

<ng-template #deleteModal5>
  <h5 mat-dialog-title>{{ 'applyTitle' | translate }}</h5>
  <div mat-dialog-content>
    <p>{{ 'modifedBandOverlapDLUL' | translate }}</p>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="notApplySameBandwidth(modalParam.dir, modalParam.isCandidate)">{{ 'OK' | translate }}</button>
  </div>
</ng-template> -->

<div [ngStyle]="bgdivStyle"></div>
